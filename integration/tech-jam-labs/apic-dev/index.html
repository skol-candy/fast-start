<!DOCTYPE html><html lang="en" class="no-js"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="Public viewable bootcamp materials for Fast-Start"><meta name="author" content="John Abbott"><link href="https://github.com/skol-candy/fast-start/integration/tech-jam-labs/apic-dev/" rel="canonical"><link rel="icon" href="https://www.ibm.com/favicon.ico"><meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.20"><title>API Connect API Development - Automation Fast-Starts</title><link rel="stylesheet" href="../../../assets/stylesheets/main.e53b48f4.min.css"><link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=IBM+Plex+Sans:300,300i,400,400i,700,700i%7CIBM+Plex+Mono:400,400i,700,700i&amp;display=fallback"><style>:root{--md-text-font:"IBM Plex Sans";--md-code-font:"IBM Plex Mono"}</style><script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script id="__analytics">function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config",""),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script><script>"undefined"!=typeof __md_analytics&&__md_analytics()</script><link rel="stylesheet" href="../../../assets/stylesheets/custom.00c04c01.min.css"><link href="../../../assets/stylesheets/glightbox.min.css" rel="stylesheet"><script src="../../../assets/javascripts/glightbox.min.js"></script><style id="glightbox-style">
            html.glightbox-open { overflow: initial; height: 100%; }
            .gslide-title { margin-top: 0px; user-select: text; }
            .gslide-desc { color: #666; user-select: text; }
            .gslide-image img { background: white; }
            .gscrollbar-fixer { padding-right: 15px; }
            .gdesc-inner { font-size: 0.75rem; }
            body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color); }
            body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color); }
            body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color); }
        </style></head> <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"> <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off"> <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off"> <label class="md-overlay" for="__drawer"></label> <div data-md-component="skip"> <a href="#api-connect-api-development" class="md-skip"> Skip to content </a> </div> <div data-md-component="announce"> <aside class="md-banner"> <div class="md-banner__inner md-grid md-typeset"> Welcome to Automation Fast-Starts </div> </aside> </div> <header class="md-header md-header--shadow" data-md-component="header"> <nav class="md-header__inner md-grid" aria-label="Header"> <a href="../../.." title="Automation Fast-Starts" class="md-header__button md-logo" aria-label="Automation Fast-Starts" data-md-component="logo"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M6.906.664a1.75 1.75 0 0 1 2.187 0l5.25 4.2c.415.332.657.835.657 1.367v7.019A1.75 1.75 0 0 1 13.25 15h-3.5a.75.75 0 0 1-.75-.75V9H7v5.25a.75.75 0 0 1-.75.75h-3.5A1.75 1.75 0 0 1 1 13.25V6.23c0-.531.242-1.034.657-1.366l5.25-4.2Zm1.25 1.171a.25.25 0 0 0-.312 0l-5.25 4.2a.25.25 0 0 0-.094.196v7.019c0 .138.112.25.25.25H5.5V8.25a.75.75 0 0 1 .75-.75h3.5a.75.75 0 0 1 .75.75v5.25h2.75a.25.25 0 0 0 .25-.25V6.23a.25.25 0 0 0-.094-.195Z"></path></svg> </a> <label class="md-header__button md-icon" for="__drawer"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"></path></svg> </label> <div class="md-header__title" data-md-component="header-title"> <div class="md-header__ellipsis"> <div class="md-header__topic"> <span class="md-ellipsis"> Automation Fast-Starts </span> </div> <div class="md-header__topic" data-md-component="header-topic"> <span class="md-ellipsis"> API Connect API Development </span> </div> </div> </div> <form class="md-header__option" data-md-component="palette"> <input class="md-option" data-md-color-media="(prefers-color-scheme)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo" aria-label="Switch to light mode" type="radio" name="__palette" id="__palette_0"> <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1M8 13h8v-2H8zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4a5 5 0 0 0 5-5 5 5 0 0 0-5-5"></path></svg> </label> <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo" aria-label="Switch to dark mode" type="radio" name="__palette" id="__palette_1"> <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"></path></svg> </label> <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="indigo" aria-label="Switch to system preference" type="radio" name="__palette" id="__palette_2"> <label class="md-header__button md-icon" title="Switch to system preference" for="__palette_0" hidden> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5M7 15a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"></path></svg> </label> </form> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for="__search"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg> </label> <div class="md-search" data-md-component="search" role="dialog"> <label class="md-search__overlay" for="__search"></label> <div class="md-search__inner" role="search"> <form class="md-search__form" name="search"> <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required> <label class="md-search__icon md-icon" for="__search"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg> </label> <nav class="md-search__options" aria-label="Search"> <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text data-md-component="search-share" tabindex="-1"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"></path></svg> </a> <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg> </button> </nav> <div class="md-search__suggest" data-md-component="search-suggest"></div> </form> <div class="md-search__output"> <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix> <div class="md-search-result" data-md-component="search-result"> <div class="md-search-result__meta"> Initializing search </div> <ol class="md-search-result__list" role="presentation"></ol> </div> </div> </div> </div> </div> <div class="md-header__source"> <a href="https://github.com/skol-candy/fast-start" title="Go to repository" class="md-source" data-md-component="source"> <div class="md-source__icon md-icon"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"></path></svg> </div> <div class="md-source__repository"> skol-candy/fast-start </div> </a> </div> </nav> </header> <div class="md-container" data-md-component="container"> <main class="md-main" data-md-component="main"> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation"> <div class="md-sidebar__scrollwrap"> <div class="md-sidebar__inner"> <nav class="md-nav md-nav--primary md-nav--integrated" aria-label="Navigation" data-md-level="0"> <label class="md-nav__title" for="__drawer"> <a href="../../.." title="Automation Fast-Starts" class="md-nav__button md-logo" aria-label="Automation Fast-Starts" data-md-component="logo"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M6.906.664a1.75 1.75 0 0 1 2.187 0l5.25 4.2c.415.332.657.835.657 1.367v7.019A1.75 1.75 0 0 1 13.25 15h-3.5a.75.75 0 0 1-.75-.75V9H7v5.25a.75.75 0 0 1-.75.75h-3.5A1.75 1.75 0 0 1 1 13.25V6.23c0-.531.242-1.034.657-1.366l5.25-4.2Zm1.25 1.171a.25.25 0 0 0-.312 0l-5.25 4.2a.25.25 0 0 0-.094.196v7.019c0 .138.112.25.25.25H5.5V8.25a.75.75 0 0 1 .75-.75h3.5a.75.75 0 0 1 .75.75v5.25h2.75a.25.25 0 0 0 .25-.25V6.23a.25.25 0 0 0-.094-.195Z"></path></svg> </a> Automation Fast-Starts </label> <div class="md-nav__source"> <a href="https://github.com/skol-candy/fast-start" title="Go to repository" class="md-source" data-md-component="source"> <div class="md-source__icon md-icon"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"></path></svg> </div> <div class="md-source__repository"> skol-candy/fast-start </div> </a> </div> <ul class="md-nav__list" data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1"> <div class="md-nav__link md-nav__container"> <a href="../../.." class="md-nav__link "> <span class="md-ellipsis"> Welcome </span> </a> </div> <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_1"> <span class="md-nav__icon md-icon"></span> Welcome </label> <ul class="md-nav__list" data-md-scrollfix> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2"> <div class="md-nav__link md-nav__container"> <a href="../../../ama-app-mod/" class="md-nav__link "> <span class="md-ellipsis"> App-Mod with AMA </span> </a> <label class="md-nav__link " for="__nav_2" id="__nav_2_label" tabindex="0"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_2"> <span class="md-nav__icon md-icon"></span> App-Mod with AMA </label> <ul class="md-nav__list" data-md-scrollfix> <li class="md-nav__item"> <a href="../../../ama-app-mod/ama-install/" class="md-nav__link"> <span class="md-ellipsis"> AMA Installation </span> </a> </li> <li class="md-nav__item"> <a href="../../../ama-app-mod/ama-run-scan/" class="md-nav__link"> <span class="md-ellipsis"> Scanning </span> </a> </li> <li class="md-nav__item"> <a href="../../../ama-app-mod/ama-scan-results/" class="md-nav__link"> <span class="md-ellipsis"> Scan Results </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3"> <div class="md-nav__link md-nav__container"> <a href="../../../wca-app-dev-mod/" class="md-nav__link "> <span class="md-ellipsis"> App Dev &amp; Mod WCA </span> </a> <label class="md-nav__link " for="__nav_3" id="__nav_3_label" tabindex="0"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_3"> <span class="md-nav__icon md-icon"></span> App Dev &amp; Mod WCA </label> <ul class="md-nav__list" data-md-scrollfix> <li class="md-nav__item"> <a href="../../../wca-app-dev-mod/lab-1-explain/" class="md-nav__link"> <span class="md-ellipsis"> Lab 1 - Explain </span> </a> </li> <li class="md-nav__item"> <a href="../../../wca-app-dev-mod/lab-2-modernize/" class="md-nav__link"> <span class="md-ellipsis"> Lab 2 - Modernize </span> </a> </li> <li class="md-nav__item"> <a href="../../../wca-app-dev-mod/lab-3-upgrade/" class="md-nav__link"> <span class="md-ellipsis"> Lab 3 - Upgrade Java </span> </a> </li> <li class="md-nav__item"> <a href="../../../wca-app-dev-mod/lab-4-unit-test/" class="md-nav__link"> <span class="md-ellipsis"> Lab 4 - Unit Test </span> </a> </li> <li class="md-nav__item"> <a href="../../../wca-app-dev-mod/lab-5-general-programming/" class="md-nav__link"> <span class="md-ellipsis"> Lab 5 - General Programming </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-content" data-md-component="content"> <article class="md-content__inner md-typeset"> <a href="https://github.com/skol-candy/fast-start/edit/master/docs/integration/tech-jam-labs/apic-dev.md" title="Edit this page" class="md-content__button md-icon" rel="edit"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"></path></svg> </a> <a href="https://github.com/skol-candy/fast-start/raw/master/docs/integration/tech-jam-labs/apic-dev.md" title="View source of this page" class="md-content__button md-icon"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.2 8.2 0 0 1-1.23-2"></path></svg> </a> <h1 id="api-connect-api-development">API Connect API Development<a class="headerlink" href="#api-connect-api-development" title="Permanent link">¶</a></h1> <p>In this lab you will be preparing APIC for API development in following exercises. The API will call the App Connect micro-services we created in a previous ACE exercise. You will then consume the API via a <strong>Developer Portal</strong> and observe the results.</p> <p>As part of this exercise you will work though developing your API.</p> <h2 id="developing-our-api">Developing our API<a class="headerlink" href="#developing-our-api" title="Permanent link">¶</a></h2> <p>Personas played:</p> <p><a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="../images/apic/will.png" data-desc-position="bottom"><img alt="Will" src="../images/apic/will.png"></a> <strong>Cloud Manager - Will</strong> - logs into the API Manager as the <em>admin</em> user on this lab for simplicity</p> <p><a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="../images/apic/shavon.png" data-desc-position="bottom"><img alt="Shavon" src="../images/apic/shavon.png"></a> <strong>API Developer - Shavon</strong> - logs into the API Manager Portal as the <em>admin</em> user on this lab for simplicity</p> <p>In this section Shavon, the API Developer, will develop the API in the API Manager.</p> <h3 id="setup-the-provider-organisation-porg-as-will-the-cloud-manager">Setup the Provider Organisation (pOrg) as Will the Cloud Manager<a class="headerlink" href="#setup-the-provider-organisation-porg-as-will-the-cloud-manager" title="Permanent link">¶</a></h3> <div class="tabbed-set tabbed-alternate" data-tabs="1:2"><input checked="checked" id="setup-the-provider-organisation-porg-as-will-the-cloud-manager-manual-setup-of-the-porg" name="__tabbed_1" type="radio"><input id="setup-the-provider-organisation-porg-as-will-the-cloud-manager-automated-setup-of-the-porg-with-script-04-apic-new-porgsh" name="__tabbed_1" type="radio"><div class="tabbed-labels"><label for="setup-the-provider-organisation-porg-as-will-the-cloud-manager-manual-setup-of-the-porg">Manual setup of the pOrg</label><label for="setup-the-provider-organisation-porg-as-will-the-cloud-manager-automated-setup-of-the-porg-with-script-04-apic-new-porgsh">Automated setup of the pOrg with script 04-apic-new-porg.sh</label></div> <div class="tabbed-content"> <div class="tabbed-block"> <p>We need to create a Provider Organisation or <em>pOrg</em> to organise the APIs that we will make available to consumers on API Connect. We will create a <em>pOrg</em> called <code>cp4i-demo-org</code> and set the <code>admin admin</code> user as the Owner. To complete this log into the <code>Cloud Manager</code> UI as the <code>Plaform Nav</code> admin user (you will be logged in from the previous steps). Follow these <a href="https://www.ibm.com/docs/en/api-connect/10.0.x?topic=organizations-creating-provider-organization">Creating a provider organization</a> instructions.</p> <p>There are two options in these instructions.</p> <p><a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="../images/apic/07-CM-PORGS-01.png" data-desc-position="bottom"><img alt="Add pOrg options" src="../images/apic/07-CM-PORGS-01.png" style="height: auto;width: 90%;"></a></p> <p>We used option 2: <code>Add &gt; Create Organization</code>. Specify the following information in the form:</p> <ul> <li><code>Title</code>: <code>CP4I Demo Provider Org</code></li> <li><code>User Registry</code>: Select <code>Common Services User Registry</code></li> <li>Type of user: Slect <code>Existing</code></li> <li><code>Username</code>: <code>admin</code></li> </ul> <p><a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="../images/apic/08-CM-PORGS-02.png" data-desc-position="bottom"><img alt="Create pOrg form" src="../images/apic/08-CM-PORGS-02.png" style="height: auto;width: 90%;"></a></p> <p>Click <strong>Create</strong></p> <p>The <code>Provider organizations</code> page is displayed and you will see the new <em>pOrg</em> in the list.</p> <p><a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="../images/apic/09-CM-PORGS-03.png" data-desc-position="bottom"><img alt="pOrg in list" src="../images/apic/09-CM-PORGS-03.png" style="height: auto;width: 90%;"></a></p> </div> <div class="tabbed-block"> <p><code>sh export MAILTRAP_USER=&lt;my-mailtrap-user&gt; export MAILTRAP_PWD=&lt;my-mailtrap-pwd&gt; scripts/04-apic-new-porg.sh</code> This script performs the following steps:</p> <ol> <li>Logs into API Connect using the <em>apic</em> client on your workstation, with the Cloud Management Console Admin User and Password</li> <li>Creates a <em>Provider Organisation</em> for the <em>admin</em> user</li> </ol> </div> </div> </div> <h2 id="develop-and-publish-our-api-as-shavon-the-api-developer">Develop and publish our API as Shavon the API Developer<a class="headerlink" href="#develop-and-publish-our-api-as-shavon-the-api-developer" title="Permanent link">¶</a></h2> <p>In this section you will:</p> <ul> <li>Login to the API Manager</li> <li>Import, review and test our API</li> <li>Create an API Product to host our API</li> <li>Publish our API Product</li> </ul> <h3 id="log-into-the-api-manager">Log into the API Manager<a class="headerlink" href="#log-into-the-api-manager" title="Permanent link">¶</a></h3> <ol> <li> <p>Login to the Automation Foundation</p> <p>From the platform navigator, under <strong>API lifecycle management</strong>, right click on <strong>apim-demo</strong> and open in a private browser tab.</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>When working with API Connect it is useful to open up the <strong>Cloud Manager</strong> and <strong>API Manager</strong> in separate private browser tabs.</p> </div> <p>Accept the security exceptions (on Chrome you might have to type in 'thisisunsafe' to achieve this).</p> <p>Choose the <em>IBM provided credentials (admin only)</em> option to login. This allows you to login to the IBM Automation foundation with the default <code>admin</code> account. This can be found in the <code>tools</code> project under <code>workloads</code> &gt; <code>secrets</code> &gt; <code>ibm-iam-bindinfo-platform-auth-idp-credentials</code><br> Alternatively run the following <code>oc</code> commands to get the credentials:</p> <div class="language-sh highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>oc<span class="w"> </span>get<span class="w"> </span>secret<span class="w"> </span>ibm-iam-bindinfo-platform-auth-idp-credentials<span class="w"> </span>-n<span class="w"> </span>tools<span class="w"> </span>-o<span class="w"> </span><span class="nv">jsonpath</span><span class="o">=</span><span class="s2">"{.data.admin_username}"</span><span class="p">|</span><span class="w"> </span>base64<span class="w"> </span>-d
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>oc<span class="w"> </span>get<span class="w"> </span>secret<span class="w"> </span>ibm-iam-bindinfo-platform-auth-idp-credentials<span class="w"> </span>-n<span class="w"> </span>tools<span class="w"> </span>-o<span class="w"> </span><span class="nv">jsonpath</span><span class="o">=</span><span class="s2">"{.data.admin_password}"</span><span class="p">|</span><span class="w"> </span>base64<span class="w"> </span>-d
</span></code></pre></div> <p>Once you login to Automation Foundation, the API Manager Login page will display.</p> </li> <li> <p>Login to the API Manager Console and select the option <strong>Common Services User Registry</strong>. You will be automatically logged into the API manager.</p> </li> <li> <p>Validate that you are in the new Provider Organization, as the admin user</p> <p>At the top right hand side of the screen hover over the text to right of <strong>Organization:</strong>, it should display the text <strong>CP4I Demo Provider Org</strong></p> <p><a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="../images/apic/10-AM-HOME.png" data-desc-position="bottom"><img alt="API Manager Home" src="../images/apic/10-AM-HOME.png" style="height: auto;width: 90%;"></a></p> <p>To the right of the Provider Org, you will see that you are logged in as <em>admin</em>. You can expand the list and can click on <code>My account</code> to see more information.</p> </li> </ol> <h3 id="get-the-api-endpoints-from-app-connect-enterprise-ace">Get the API endpoints from App Connect Enterprise (ACE)<a class="headerlink" href="#get-the-api-endpoints-from-app-connect-enterprise-ace" title="Permanent link">¶</a></h3> <p>Our API will have three possible endpoints:</p> <ol> <li>The 'TARGET_URL' which points to our App Connect Designer instance <code>jgr-designer-sfleads</code></li> <li>The 'PREMIUM_URL' which points to our ACE instance <code>jgr-mqapi-prem</code> - this will be exposed on an API <em>Plan</em> with 600 calls allowed per hour</li> <li>The 'DEFAULT_URL' which points to our ACE instance <code>jgr-mqapi-dflt</code> - this will be exposed on an API <em>Plan</em> with 5 calls allowed per minute</li> </ol> <p>To get the required URLS run the following commands in a terminal window, where you are logged into the OCP cluster:</p> <div class="language-sh highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>touch<span class="w"> </span>appconnurls.txt
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="nb">echo</span><span class="w"> </span>TARGET_URL<span class="w"> </span>is:<span class="w"> </span><span class="k">$(</span>oc<span class="w"> </span>get<span class="w"> </span>integrationserver<span class="w"> </span>jgr-designer-sfleads<span class="w"> </span>-n<span class="w"> </span>tools<span class="w"> </span>-o<span class="w"> </span><span class="nv">jsonpath</span><span class="o">=</span><span class="s1">'{.status.endpoints[0].uri}'</span><span class="k">)</span><span class="s1">'/SFLeads/lead'</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>appconnurls.txt
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="nb">echo</span><span class="w"> </span>PREMIUM_URL<span class="w"> </span>is:<span class="w"> </span><span class="k">$(</span>oc<span class="w"> </span>get<span class="w"> </span>integrationserver<span class="w"> </span>jgr-mqapi-prem<span class="w"> </span>-n<span class="w"> </span>tools<span class="w"> </span>-o<span class="w"> </span><span class="nv">jsonpath</span><span class="o">=</span><span class="s1">'{.status.endpoints[0].uri}'</span><span class="k">)</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>appconnurls.txt
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="nb">echo</span><span class="w"> </span>DEFAULT_URL<span class="w"> </span>is:<span class="w"> </span><span class="k">$(</span>oc<span class="w"> </span>get<span class="w"> </span>integrationserver<span class="w"> </span>jgr-mqapi-dflt<span class="w"> </span>-n<span class="w"> </span>tools<span class="w"> </span>-o<span class="w"> </span><span class="nv">jsonpath</span><span class="o">=</span><span class="s1">'{.status.endpoints[0].uri}'</span><span class="k">)</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>appconnurls.txt
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a>cat<span class="w"> </span>appconnurls.txt
</span><span id="__span-1-6"><a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a>rm<span class="w"> </span>appconnurls.txt<span class="w"> </span><span class="p">;</span>
</span></code></pre></div> <div class="admonition note"> <p class="admonition-title">TARGET_URL</p> <p>We are currently using the Sales Force URL use this value instead: <a href="http://jgr-designer-sfleads-http-tools.jgrocp410cp4i20221-dcd557ed086a97d77c2297a53c025612-0000.us-south.containers.appdomain.cloud/SFLeads/">http://jgr-designer-sfleads-http-tools.jgrocp410cp4i20221-dcd557ed086a97d77c2297a53c025612-0000.us-south.containers.appdomain.cloud/SFLeads/</a> For the other two URLs, if your above script does not return a URL, you may not have deployed the BAR file from the earlier MQ message flow lab. This lab expects you have deployed that BAR twice. Once to an integration server <code>jgr-mqapi-prem</code> and second to an integration server <code>jgr-mqapi-dflt</code>.</p> </div> <h3 id="import-our-api-definition-to-api-connect">Import our API definition to API Connect<a class="headerlink" href="#import-our-api-definition-to-api-connect" title="Permanent link">¶</a></h3> <p>On the <strong>API Manager</strong> Home Page, select the <code>Develop APIs and products</code> tile on the home page or the <code>Develop</code> icon on the left menu.</p> <p><a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="../images/apic/11-AM-DVLP-APIS-PRODUCTS.png" data-desc-position="bottom"><img alt="API Manager Develop APIs and Products" src="../images/apic/11-AM-DVLP-APIS-PRODUCTS.png" style="height: auto;width: 30%;"></a></p> <p>Select <strong>Add &gt; API(from REST, GraphQL or SOAP)</strong> from the top right.</p> <p><a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="../images/apic/12-AM-ADD-API-FROM-REST.png" data-desc-position="bottom"><img alt="API Manager Add API from REST" src="../images/apic/12-AM-ADD-API-FROM-REST.png" style="height: auto;width: 40%;"></a></p> <p>Use the <code>jgrmqapiv2</code> OpenAPI (Swagger) document in the <code>templates</code> part of the repository you cloned in a previous exercise: <code>template-apic-api-def-jgrmqapiv2.yaml</code> (found in the <repo route>/templates/template-apic-api-def-jgrmqapiv2.yaml) to define the API by selecting <strong>Create &gt; From existing OpenAPI service &gt; Next</strong>.</repo></p> <p><a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="../images/apic/13-AM-FROM-EXISTING-API-SVC.png" data-desc-position="bottom"><img alt="API Manager from exiting API" src="../images/apic/13-AM-FROM-EXISTING-API-SVC.png" style="height: auto;width: 50%;"></a></p> <p>Next drag the templates/template-apic-api-def-jgrmqapiv2.yaml document into the <code>File upload</code> box and select <code>Next</code>.</p> <p><a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="../images/apic/14-AM-API-UPLOAD.png" data-desc-position="bottom"><img alt="API Manager API Upload" src="../images/apic/14-AM-API-UPLOAD.png" style="height: auto;width: 90%;"></a></p> <p>Review the details and select <code>Next</code>.</p> <p><a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="../images/apic/15-AM-REVIEW-API-DETAILS.png" data-desc-position="bottom"><img alt="API Manager review API details" src="../images/apic/15-AM-REVIEW-API-DETAILS.png" style="height: auto;width: 90%;"></a></p> <p>The <code>Secure</code> page is displayed. Ensure the following are selected - <code>Secure using Client ID</code> - <code>CORS</code></p> <p><a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="../images/apic/16-AM-REVIEW-API-SECURITY.png" data-desc-position="bottom"><img alt="API Manager review API security" src="../images/apic/16-AM-REVIEW-API-SECURITY.png" style="height: auto;width: 90%;"></a></p> <p>Select <strong>Next</strong>. The output of the API definition should inidicate that it was successfully generated and security applied. </p> <p><a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="../images/apic/17-AM-REVIEW-API-SUMMARY.png" data-desc-position="bottom"><img alt="API Manager review API summary" src="../images/apic/17-AM-REVIEW-API-SUMMARY.png" style="height: auto;width: 70%;"></a></p> <p>Choose <strong>Edit API</strong></p> <p>The <code>Design</code> tab opens for the API.</p> <p>In the <code>Security Schemes</code> section a <code>clientID</code> scheme of type <code>apiKey</code> has been added.</p> <p><a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="../images/apic/18-AM-API-DESIGN-SEC-SCHEME.png" data-desc-position="bottom"><img alt="API Security Schemes" src="../images/apic/18-AM-API-DESIGN-SEC-SCHEME.png" style="height: auto;width: 90%;"></a></p> <p>In the <strong>General &gt; Security</strong> section, the scheme is shown as mandatory meaning a valid <code>clientID</code> is required to be passed whenever the API is called.</p> <p><a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="../images/apic/19-AM-API-DESIGN-SEC-MANDATORY.png" data-desc-position="bottom"><img alt="ClientID Required for API" src="../images/apic/19-AM-API-DESIGN-SEC-MANDATORY.png" style="height: auto;width: 90%;"></a></p> <h3 id="update-the-api-backend-urls">Update the API backend URLS<a class="headerlink" href="#update-the-api-backend-urls" title="Permanent link">¶</a></h3> <p>In the top banner click <code>Gateway</code>, then, in the left-hand side, expand <code>Properties</code>. You will see that three url properties are listed:</p> <ul> <li>target-url</li> <li>premium-url</li> <li>default-url</li> </ul> <p><a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="../images/apic/20-AM-GATEWAY-PROPERTIES-1.png" data-desc-position="bottom"><img alt="Gateway Properties" src="../images/apic/20-AM-GATEWAY-PROPERTIES-1.png" style="height: auto;width: 90%;"></a></p> <p>Click on each of these and add the corresponding URLs from the <code>Get the API endpoints from App Connect Enterprise (ACE)</code> section to the <code>Property Value (optional)</code> field.</p> <p>Target URL:</p> <p><a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="../images/apic/21-AM-GATEWAY-TARGET-URL.png" data-desc-position="bottom"><img alt="TARGETURL" src="../images/apic/21-AM-GATEWAY-TARGET-URL.png" style="height: auto;width: 90%;"></a></p> <p>Premium URL:</p> <p><a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="../images/apic/22-AM-GATEWAY-PREMIUM-URL.png" data-desc-position="bottom"><img alt="Premium URL" src="../images/apic/22-AM-GATEWAY-PREMIUM-URL.png" style="height: auto;width: 90%;"></a></p> <p>Default URL:</p> <p><a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="../images/apic/23-AM-GATEWAY-DEFAULT-URL.png" data-desc-position="bottom"><img alt="Default URL" src="../images/apic/23-AM-GATEWAY-DEFAULT-URL.png" style="height: auto;width: 90%;"></a></p> <p>Click <code>Save</code></p> <h3 id="build-the-api-policy">Build the API Policy<a class="headerlink" href="#build-the-api-policy" title="Permanent link">¶</a></h3> <p>The API Connect Designer gives us the ability to build <em>Gateway Policies</em> which are executed on each API request. This allows us to add in elements to the API definition that are <a href="https://www.ibm.com/docs/en/api-connect/10.0.5.x_lts?topic=file-extensions-openapi-specification">IBM extensions to the OpenAPI specification</a>.</p> <p>We will use the lo-code <a href="https://www.ibm.com/docs/en/api-connect/10.0.5.x_lts?topic=assembly-editor">assembly editor</a> to build out our policy to look like the below:</p> <p><a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="../images/apic/24-AM-GATEWAY-POLICY-COMPLETED.png" data-desc-position="bottom"><img alt="Completed GW Policy" src="../images/apic/24-AM-GATEWAY-POLICY-COMPLETED.png" style="height: auto;width: 90%;"></a></p> <p>The completed Gateway Policy will have:</p> <ul> <li>1 x Parse element</li> <li>1 x set-varible element</li> <li>2 x switch elements</li> <li>2 x gatewayscript element</li> <li>3 x invoke element</li> </ul> <p>The above elements are documented in <a href="https://www.ibm.com/docs/en/api-connect/10.0.5.x_lts?topic=specification-execute">this API Connect Documentation</a>.</p> <p>To start with your policy will look like the below image. On the left-hand side, you will see that there is a canvas with a single <code>invoke</code> element. On the right-hand side you will see a 'palette' of various elements.</p> <p><a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="../images/apic/25-AM-GATEWAY-POLICY-START.png" data-desc-position="bottom"><img alt="Starting GW Policy" src="../images/apic/25-AM-GATEWAY-POLICY-START.png" style="height: auto;width: 70%;"></a></p> <ol> <li> <p>Delete the existing <strong>Invoke</strong> element: You will add other <code>Invoke</code> elements later, the default one is not needed.</p> <p>Hover over the Invoke element and a delete icon will appear in the top right corner (looks like a trash can). Click this icon.</p> <p><a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="../images/apic/27-AM-GATEWAY-DELETE-INVOKE.png" data-desc-position="bottom"><img alt="Delete invoked" src="../images/apic/27-AM-GATEWAY-DELETE-INVOKE.png" style="height: auto;width: 50%;"></a></p> <p>You will then have a blank canvas like this:</p> <p><a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="../images/apic/28-AM-GATEWAY-BLANK-CANVAS.png" data-desc-position="bottom"><img alt="Blank canvas" src="../images/apic/28-AM-GATEWAY-BLANK-CANVAS.png" style="height: auto;width: 60%;"></a></p> </li> <li> <p>Add the <strong><em>Parse</em></strong> element: To add an element you click on it and drag it onto the canvas.</p> <p>The <code>Parse</code> element is in the <code>Transforms</code> section of the palette:</p> <p><a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="../images/apic/26-AM-GATEWAY-PARSE-01.png" data-desc-position="bottom"><img alt="Parse element in palette" src="../images/apic/26-AM-GATEWAY-PARSE-01.png" style="height: auto;width: 60%;"></a></p> <p>Click and drag the <code>Parse</code> element onto the canvas. When you do this you will see a small square box display on the line in the top left of the canvas. Drop the <code>Parse</code> element onto this square.</p> <p>The result will look similar to the following:</p> <p><a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="../images/apic/29-AM-GATEWAY-PARSE-02.png" data-desc-position="bottom"><img alt="Parse element added" src="../images/apic/29-AM-GATEWAY-PARSE-02.png" style="height: auto;width: 60%;"></a></p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>For this <code>Parse</code> element, no further information needs to be configured on the right hand side.</p> </div> <p>Click <strong>Save</strong>.</p> </li> <li> <p>Add the <strong>set-variable</strong> element from the <code>Policies</code> section of the palette: Drag and drop the <code>set-variable</code> element to be to the right of the <code>Parse</code> element. On the right hand side, a menu will display where you can configure this element. You will use this to add two actions.</p> <p>Add the first action. Click <strong>Add action</strong> and set the following attributes: - <strong>Action</strong>: <code>Set</code> - <strong>Set</strong>: <code>my-path</code> - <strong>Type</strong>: <code>string</code> - <strong>Value</strong>: <code>/jgrmqapi/v1/contacts</code></p> <p>Add the second action. Click <code>Add action</code> and set the following attributes: - <strong>Action</strong>: <code>Set</code> - <strong>Set</strong>: <code>my-mb</code> - <strong>Type</strong>: <code>any</code> - <strong>Value</strong>: <code>$(message.body)</code></p> <p><a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="../images/apic/30-AM-GATEWAY-PARSE-03.png" data-desc-position="bottom"><img alt="Parse element configured" src="../images/apic/30-AM-GATEWAY-PARSE-03.png" style="height: auto;width: 90%;"></a></p> <p>Click <strong>Save</strong>.</p> <p>The <code>set-variable</code> has prepared us for the next element, a <code>Switch</code>.</p> </li> <li> <p>Add a <strong>Switch</strong> element: This is found in the <code>Logic</code> section of the palette. Drag the <code>Switch</code> element onto the canvas and drop it to the right of the <code>set-variable</code> element.</p> <p>It should look like this:</p> <p><a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="../images/apic/31-AM-GATEWAY-SWITCH-01.png" data-desc-position="bottom"><img alt="Switch 1 added" src="../images/apic/31-AM-GATEWAY-SWITCH-01.png" style="height: auto;width: 90%;"></a></p> <p>On the right-hand side of the screen, add the following string into the <code>Condition</code> field in the <code>Case 0</code> section:</p> <p></p><div class="language-sh highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>message.body.metadata.code<span class="o">=</span><span class="s2">"TEST"</span>
</span></code></pre></div> Next, click <code>Add Otherwise</code>. You will end up with a configuration similar to the picture below:<p></p> <p><a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="../images/apic/32-AM-GATEWAY-SWITCH-02.png" data-desc-position="bottom"><img alt="Switch 1 configured" src="../images/apic/32-AM-GATEWAY-SWITCH-02.png" style="height: auto;width: 90%;"></a></p> <p>Click <code>Save</code>.</p> </li> <li> <p>Add a <strong>gatewayscript</strong> element to the canvas on the <strong>otherwise</strong> condition:</p> <p>In the event that the condition is not met (ie: we have not set "TEST"), then we will call a <code>GatewayScript</code>.</p> <p>The <code>GatewayScript</code> element can be found in the <code>Policies</code> section of the palette. Drag and drop a <code>GatewayScript</code> element onto the line below <code>Otherwise</code> (see picture below).</p> <p>In the panel on the right-hand side, there is a text editor box for your code. Copy / Paste this code into the text box:</p> <div class="language-sh highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>var<span class="w"> </span><span class="nv">apim</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>require<span class="o">(</span><span class="s1">'apim'</span><span class="o">)</span><span class="p">;</span>
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>var<span class="w"> </span><span class="nv">mb</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>apim.getvariable<span class="o">(</span><span class="s1">'message.body.payload'</span><span class="o">)</span><span class="p">;</span>
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a>apim.setvariable<span class="o">(</span><span class="s1">'message.body'</span>,<span class="w"> </span>mb<span class="o">)</span><span class="p">;</span>
</span><span id="__span-3-4"><a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a>apim.output<span class="o">(</span><span class="s1">'application/json'</span><span class="o">)</span><span class="p">;</span>
</span></code></pre></div> <p>It should look similar to the following:</p> <p><a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="../images/apic/33-AM-GATEWAY-GWS-01.png" data-desc-position="bottom"><img alt="gatewayscript 1 configured" src="../images/apic/33-AM-GATEWAY-GWS-01.png" style="height: auto;width: 70%;"></a></p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>The warning message is expected on this demo and does not affect the operation of the API.</p> </div> <p>Click <strong>Save</strong>.</p> </li> <li> <p>Add an <strong>Invoke</strong> element to the canvas on the <strong>otherwise</strong> condition: The <code>Invoke</code> element can be found in the <code>Policies</code> section of the palette. Drag and drop this on the canvas, to the right of the <code>GatewayScript</code> you just added.</p> <p>Configure the <code>Invoke</code> element with the following details:</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>If the parameter is not mention it does not need to be changed from the default setting.</p> </div> <ul> <li><strong>Title</strong>: <code>invoke-designer</code></li> <li><strong>URL</strong>: <code>$(target-url)</code></li> <li><strong>Inject proxy headers</strong>: <code>selected</code></li> <li><strong>Persistent Connection</strong>: <code>selected</code></li> <li><strong>Allow chunked uploads</strong>: <code>de-selected</code></li> <li><strong>Header control</strong>: Select <code>Blocklist</code></li> <li>Click <code>Add blocklist</code> and enter <code>^X-IBM-Client-Id$</code> in the field that appears</li> <li><strong>Parameter control</strong>: Select <code>Blocklist</code></li> <li><strong>Response object variable</strong>: <code>sf-lead</code></li> <li><strong>Stop on error</strong>: <code>de-selected</code></li> </ul> <p><a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="../images/apic/34-AM-GATEWAY-INVK-01.png" data-desc-position="bottom"><img alt="Invoke 1 configured" src="../images/apic/34-AM-GATEWAY-INVK-01.png" style="height: auto;width: 90%;"></a></p> </li> <li> <p>Add a second <code>GatewayScript</code> on the <strong>otherwise</strong> condition:</p> <p>Drag and drop a <code>GatewayScript</code> element onto the <code>Otherwise</code> condition, to the right of the <code>invoke-designer</code> element.</p> <p>On the right-hand side, copy the below code and paste it into the text editor box: </p><div class="language-sh highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>var<span class="w"> </span><span class="nv">apim</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>require<span class="o">(</span><span class="s1">'apim'</span><span class="o">)</span><span class="p">;</span>
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a>var<span class="w"> </span><span class="nv">mb</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>apim.getvariable<span class="o">(</span><span class="s1">'my-mb'</span><span class="o">)</span><span class="p">;</span>
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a>var<span class="w"> </span><span class="nv">sf</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>apim.getvariable<span class="o">(</span><span class="s1">'sf-lead.body'</span><span class="o">)</span><span class="p">;</span>
</span><span id="__span-4-4"><a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a>mb.payload.id<span class="w"> </span><span class="o">=</span><span class="w"> </span>sf.id<span class="p">;</span>
</span><span id="__span-4-5"><a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a>apim.setvariable<span class="o">(</span><span class="s1">'message.body'</span>,<span class="w"> </span>mb<span class="o">)</span><span class="p">;</span>
</span><span id="__span-4-6"><a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a>apim.output<span class="o">(</span><span class="s1">'application/json'</span><span class="o">)</span><span class="p">;</span>
</span></code></pre></div><p></p> <p>It should look like this:</p> <p><a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="../images/apic/35-AM-GATEWAY-GWS-02.png" data-desc-position="bottom"><img alt="gatewayscript 2 configured" src="../images/apic/35-AM-GATEWAY-GWS-02.png" style="height: auto;width: 90%;"></a></p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>The warning message is expected on this demo and does not affect the operation of the API.</p> </div> </li> <li> <p>Add a second <strong>Switch</strong> element to the left of the <strong>Output Node</strong>: The end of our flow is represented on thr right hand side of the canvas with a circular icon containing a flag, as shown in the below image:</p> <p><a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="../images/apic/36-AM-GATEWAY-OUTPUT-NODE.png" data-desc-position="bottom"><img alt="Output node" src="../images/apic/36-AM-GATEWAY-OUTPUT-NODE.png" style="height: auto;width: 40%;"></a></p> <p>Drag and drop a <code>Switch</code> element onto the canvas to the left of the <code>Output Node</code>. See the picture below to check the correct location.</p> <p>On the right-hand side of the screen add the following string into the <code>Condition</code> field in the <code>Case 0</code> section:</p> <div class="language-sh highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>plan.name<span class="o">=</span><span class="s2">"default-plan"</span>
</span></code></pre></div> <p>Then click <strong>Add Otherwise</strong>.</p> <p>You will end up with a configuration looking like the picture below, showing a line for <code>plan.name="default-plan"</code> and a line for <code>Otherwise</code>:</p> <p><a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="../images/apic/37-AM-GATEWAY-SWITCH-02.png" data-desc-position="bottom"><img alt="Switch 2" src="../images/apic/37-AM-GATEWAY-SWITCH-02.png" style="height: auto;width: 90%;"></a></p> <p>Click <strong>Save</strong>.</p> </li> <li> <p>Add an <strong>Invoke</strong> on the <strong>plan.name="default-plan"</strong> line: Drag and drop an <code>Invoke</code> element onto the <code>plan.name="default-plan"</code> line. Configure this <code>Invoke</code> element with the following details:</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>If the parameter is not mention it does not need to be changed from the default setting.</p> </div> <ul> <li><strong>Title</strong>: <code>invoke-default</code></li> <li><strong>URL</strong>: <code>$(default-url)$(my-path)</code></li> <li><strong>Inject proxy headers</strong>: <code>selected</code></li> <li><strong>Allow chunked uploads</strong>: <code>de-selected</code></li> <li><strong>Persistent Connection</strong>: <code>selected</code></li> <li><strong>Header control</strong>: Select <code>Blocklist</code></li> <li>Click <code>Add blocklist</code> and enter <code>^X-IBM-Client-Id$</code> in the field that appears</li> <li><strong>Parameter control</strong>: Select <code>Blocklist</code></li> <li><strong>Stop on error</strong>: <code>de-selected</code></li> </ul> <p>The canvas should now look like this:</p> <p><a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="../images/apic/38-AM-GATEWAY-INVK-02.png" data-desc-position="bottom"><img alt="Invoke deafult" src="../images/apic/38-AM-GATEWAY-INVK-02.png" style="height: auto;width: 90%;"></a></p> <p>Click <strong>Save</strong>.</p> </li> <li> <p>Add an <strong>Invoke</strong> on the <strong>Otherwise</strong> line:</p> <p>Drag and drop an <code>Invoke</code> element onto the <code>plan.name="default-plan"</code> line. Configure this <code>Invoke</code> element with the following details:</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>If the parameter is not mention it does not need to be changed from the default setting.</p> </div> <ul> <li><strong>Title</strong> : <code>invoke-premium</code></li> <li><strong>URL</strong> : <code>$(premium-url)$(my-path)</code></li> <li><strong>Inject proxy headers</strong> : <code>selected</code></li> <li><strong>Allow chunked uploads</strong> : <code>de-selected</code></li> <li><strong>Persistent Connection</strong> : <code>selected</code></li> <li><strong>Header control</strong> : Select <code>Blocklist</code></li> <li>Click <code>Add blocklist</code> and enter <code>^X-IBM-Client-Id$</code> in the field that appears</li> <li><strong>Parameter control</strong> : Select <code>Blocklist</code></li> <li><strong>Stop on error</strong> : <code>de-selected</code></li> </ul> <p>The canvas should now look like this:</p> <p><a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="../images/apic/39-AM-GATEWAY-INVK-03.png" data-desc-position="bottom"><img alt="Invoke premium" src="../images/apic/39-AM-GATEWAY-INVK-03.png" style="height: auto;width: 70%;"></a></p> <p>Click <strong>Save</strong>.</p> </li> <li> <p>The completed flow will look like this:</p> <p><a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="../images/apic/40-AM-GATEWAY-POLICY-COMPLETED-02.png" data-desc-position="bottom"><img alt="Your completed flow" src="../images/apic/40-AM-GATEWAY-POLICY-COMPLETED-02.png" style="height: auto;width: 90%;"></a></p> </li> </ol> <h3 id="use-the-api-on-the-explorer">Use the API on the <code>Explorer</code><a class="headerlink" href="#use-the-api-on-the-explorer" title="Permanent link">¶</a></h3> <ol> <li> <p>Put the API online, this will deploy the API to the (DataPower) Gateway. At the top of the screen there is a selector which says <code>Offline</code>:</p> <p><a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="../images/apic/41-AM-GATEWAY-OFFLINE.png" data-desc-position="bottom"><img alt="Offline API" src="../images/apic/41-AM-GATEWAY-OFFLINE.png" style="height: auto;width: 40%;"></a></p> <p>Click on the selector and your API will be deployed and go <code>Online</code>.</p> <p><a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="../images/apic/42-AM-GATEWAY-ONLINE.png" data-desc-position="bottom"><img alt="Online API" src="../images/apic/42-AM-GATEWAY-ONLINE.png" style="height: auto;width: 40%;"></a></p> </li> <li> <p>Navigate to the <code>Explorer</code> panel and setup the test:</p> <p>In the banner click on <code>Explorer</code>, then click <code>POST /contacts</code></p> <p>On the <code>postContacts</code> page click <code>Try it</code></p> <p>In the drop down menu next to <code>POST</code> select the endpoint: <code>https://apim-demo-gw-gateway-tools.&lt;your-ocp-cluster&gt;.eu-gb.containers.appdomain.cloud/cp4i-demo-provider-org/sandbox/jgrmqapi/v2/contacts</code></p> <p>Scroll down to the <code>Body</code> section and click <code>Generate</code>. API Connect will create sample test data for you.</p> <p>Click <strong>Send</strong></p> <div class="admonition note"> <p class="admonition-title">You might see the following message</p> <p>You may see a message explaining that API Connect does not truest the certificate. Click on the provided link and accept the exception (if you are on Chrome you might have to type 'thisisunsafe').</p> </div> <p><a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="../images/apic/44-AM-GATEWAY-CORS1.png" data-desc-position="bottom"><img alt="CORS exception" src="../images/apic/44-AM-GATEWAY-CORS1.png" style="height: auto;width: 90%;"></a></p> <p>Upon a successful request you will see a <code>200 OK</code> message returned with a payload featuring a Salesforce ID:</p> <p><a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="../images/apic/45-AM-GATEWAY-TRYIT-RESPONSE.png" data-desc-position="bottom"><img alt="Tryit Response" src="../images/apic/45-AM-GATEWAY-TRYIT-RESPONSE.png" style="height: auto;width: 90%;"></a></p> <p>If you get an internal server <code>500</code> error go back and double check that all of your API elements are configured correctly.</p> </li> </ol> <div class="admonition note"> <p class="admonition-title">Optional Step</p> <p>Test the API in the <strong>TEST</strong> Panel</p> <p>Navigate to the <code>Test</code> panel and setup the request</p> <p>In the top banner click <code>Test</code>. The <code>Request</code> panel will be displayed.</p> <p>On the <code>Parameters</code> section you will see the request headers displayed, including a Client ID, <code>X-IBM-Client-Id</code>.</p> <p><a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="../images/apic/43-AM-GATEWAY-TEST-01.png" data-desc-position="bottom"><img alt="Test Parameters" src="../images/apic/43-AM-GATEWAY-TEST-01.png" style="height: auto;width: 90%;"></a></p> <p>On the <code>Body</code> panel you will see that an example message body has been populated. It should look something like this:</p> <p></p><div class="language-sh highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="o">{</span>
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="w">  </span><span class="s2">"metadata"</span>:<span class="w"> </span><span class="o">{</span>
</span><span id="__span-6-3"><a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a><span class="w">    </span><span class="s2">"code"</span>:<span class="w"> </span><span class="s2">"igdisenewel"</span>
</span><span id="__span-6-4"><a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a><span class="w">  </span><span class="o">}</span>,
</span><span id="__span-6-5"><a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a><span class="w">  </span><span class="s2">"payload"</span>:<span class="w"> </span><span class="o">{</span>
</span><span id="__span-6-6"><a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a><span class="w">    </span><span class="s2">"id"</span>:<span class="w"> </span><span class="s2">"6682892837060608"</span>,
</span><span id="__span-6-7"><a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a><span class="w">    </span><span class="s2">"fname"</span>:<span class="w"> </span><span class="s2">"Ricardo"</span>,
</span><span id="__span-6-8"><a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a><span class="w">    </span><span class="s2">"lname"</span>:<span class="w"> </span><span class="s2">"Sestini"</span>,
</span><span id="__span-6-9"><a id="__codelineno-6-9" name="__codelineno-6-9" href="#__codelineno-6-9"></a><span class="w">    </span><span class="s2">"email"</span>:<span class="w"> </span><span class="s2">"wew@jo.nz"</span>,
</span><span id="__span-6-10"><a id="__codelineno-6-10" name="__codelineno-6-10" href="#__codelineno-6-10"></a><span class="w">    </span><span class="s2">"phone"</span>:<span class="w"> </span><span class="s2">"(555) 819-9636"</span>,
</span><span id="__span-6-11"><a id="__codelineno-6-11" name="__codelineno-6-11" href="#__codelineno-6-11"></a><span class="w">    </span><span class="s2">"company"</span>:<span class="w"> </span><span class="s2">"imidimpudw"</span>,
</span><span id="__span-6-12"><a id="__codelineno-6-12" name="__codelineno-6-12" href="#__codelineno-6-12"></a><span class="w">    </span><span class="s2">"comments"</span>:<span class="w"> </span><span class="s2">"gudubj"</span>
</span><span id="__span-6-13"><a id="__codelineno-6-13" name="__codelineno-6-13" href="#__codelineno-6-13"></a><span class="w">  </span><span class="o">}</span>
</span><span id="__span-6-14"><a id="__codelineno-6-14" name="__codelineno-6-14" href="#__codelineno-6-14"></a><span class="o">}</span>
</span></code></pre></div> If the <code>Body</code> is not populated copy and paste the above sample into the provided field.<p></p> <p>Send a test request message: Click <strong>Send</strong></p> <p>If successful, the response should look like this:</p> <p><a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="../images/apic/46-AM-GATEWAY-TEST-RESPONSE.png" data-desc-position="bottom"><img alt="Test Parameters" src="../images/apic/46-AM-GATEWAY-TEST-RESPONSE.png" style="height: auto;width: 90%;"></a></p> </div> <h3 id="import-our-api-product-definition-to-api-connect">Import our API Product Definition to API Connect<a class="headerlink" href="#import-our-api-product-definition-to-api-connect" title="Permanent link">¶</a></h3> <p>Navigate back to the API Manager Homepage by Clicking on the <strong>Home</strong> icon in the top-left corner of the screen.</p> <p>Click on <code>Develop APIs and Products</code>. You will see the <code>APIs</code> screen is displayed and you will see the <code>JGRMQAPI</code> API is listed.</p> <p><a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="../images/apic/47-AM-DVLP-API.png" data-desc-position="bottom"><img alt="List APIS" src="../images/apic/47-AM-DVLP-API.png" style="height: auto;width: 90%;"></a></p> <p>Click <strong>Products</strong>. A blank list is displayed.</p> <p><a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="../images/apic/48-AM-DVLP-PRODUCTS.png" data-desc-position="bottom"><img alt="List Products" src="../images/apic/48-AM-DVLP-PRODUCTS.png" style="height: auto;width: 90%;"></a></p> <p>Click <strong>Add</strong> and select <code>Product</code>. Then select <code>Existing Product</code> and click <strong>Next</strong>.</p> <p>Drag and drop artifacts/03-jgr-mqapi-product.yaml product from your file system to the box below <code>Import from file</code>.</p> <p><a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="../images/apic/49-AM-IMPORT-PRODUCT-01.png" data-desc-position="bottom"><img alt="Import Product" src="../images/apic/49-AM-IMPORT-PRODUCT-01.png" style="height: auto;width: 90%;"></a></p> <p>Click <strong>Next</strong>.</p> <p>On the <code>Publish</code> page leave <code>Publish product</code> un-ticked and click <strong>Next</strong>, then click <strong>Done</strong>. YOu will be taken back to the <code>Develop</code> screen, with the <code>APIs</code> listed.</p> <p>Click <strong>Products</strong> and you will see <code>JGRMQAPI Product</code> is now listed.</p> <p><a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="../images/apic/50-AM_PRODLIST.png" data-desc-position="bottom"><img alt="Import Product" src="../images/apic/50-AM_PRODLIST.png" style="height: auto;width: 90%;"></a></p> <p>Click on the <code>JGRMQAPI Product</code>. The <code>jgrmqapi-product</code> page is displayed.</p> <p><a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="../images/apic/51-AM-PROD-PAGE-01.png" data-desc-position="bottom"><img alt="Import Product" src="../images/apic/51-AM-PROD-PAGE-01.png" style="height: auto;width: 90%;"></a></p> <p>On the <code>Design</code> tab there are a series of sections to review:</p> <ul> <li><strong>Product setup</strong>: Allows us to set the title, version and description for the product</li> <li><strong>Visibility</strong>: controls who can view and subscribe to the product. For this product subscribers and viewers must be authenticated to API Connect.</li> <li><strong>APIs</strong>: we can see that the <code>JGRMQAPI</code> (which we just configured) is part of this product.</li> <li><strong>Plans</strong>: plans control the way in which consumer applications can use the APIs in this product. This product has two plans defined: <code>default</code> and <code>premium</code><ul> <li>You can click on the three dots on the right hand side of each plan and click <code>Edit</code></li> <li>You can then review the relative rate limits that are setup for each plan (you will need to scroll down)</li> <li>To exit the <code>Edit plan</code> screen, click <code>Categories</code> on the left hand side</li> </ul> </li> <li><strong>Categories</strong>: these can be used to arrange the diaply of APIs within the product on the Developer Portal. This product does not configure anything here.</li> </ul> <p>On the <code>Source</code> tab you can see the <code>yaml</code> representation of the API product.</p> <h2 id="create-the-demo-catalog-and-publish-the-api-product">Create the <strong><em>Demo</em></strong> catalog and publish the API Product<a class="headerlink" href="#create-the-demo-catalog-and-publish-the-api-product" title="Permanent link">¶</a></h2> <h3 id="create-the-demo-catalog-as-jason-the-api-lifecyle-manager">Create the <strong><em>Demo</em></strong> catalog - as Jason the API Lifecyle Manager<a class="headerlink" href="#create-the-demo-catalog-as-jason-the-api-lifecyle-manager" title="Permanent link">¶</a></h3> <p>Navigate back to the API Manager Homepage by clicking on the <strong>Home</strong> icon in the top-left corner of the screen.</p> <p>Next click on <strong>Manage catalogs</strong>.</p> <p><a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="../images/apic/52-AM-CATALOG-01.png" data-desc-position="bottom"><img alt="Import Product" src="../images/apic/52-AM-CATALOG-01.png" style="height: auto;width: 90%;"></a></p> <p>The <code>Manage</code> page is displayed. Click on <strong>Add</strong>.</p> <p><a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="../images/apic/53-AM-CATALOG-02.png" data-desc-position="bottom"><img alt="Import Product" src="../images/apic/53-AM-CATALOG-02.png" style="height: auto;width: 90%;"></a></p> <p>Follow these documents:</p> <ul> <li><a href="https://www.ibm.com/docs/en/api-connect/10.0.x?topic=catalogs-creating-configuring">Creating and configuring Catalogs</a></li> <li><a href="https://www.ibm.com/docs/en/api-connect/10.0.x?topic=organizations-creating-consumer-organization">Creating a consumer organization</a> instructions</li> </ul> <p>In summary do the following:</p> <p>Create the catalog and set the owner.</p> <ul> <li><strong>Title</strong>: <code>Demo</code></li> <li><strong>Select user</strong>: use the default value - <code>admin admin (admin), admin@cp4i.net</code></li> </ul> <p>Click <strong>Create</strong> and your catalog will be created and then be shown on the manage page.</p> <h3 id="publish-the-jgrmqapi-product-api-product-to-the-demo-catalog-as-shavon-the-api-developer">Publish the <code>JGRMQAPI</code> Product API Product*** to the <code>Demo</code> catalog - as Shavon the API Developer<a class="headerlink" href="#publish-the-jgrmqapi-product-api-product-to-the-demo-catalog-as-shavon-the-api-developer" title="Permanent link">¶</a></h3> <p>Navigate back to the API Manager Homepage by Clicking on the <strong>Home</strong> icon in the top-left corner of the screen.</p> <p>Click on <strong>Develop APIs and Products</strong>. You will see the <code>APIs</code> screen is displayed and you will see the <code>JGRMQAPI</code> API is listed.</p> <p>Click on <strong>Products</strong>. The <code>JGRMQAPI Product API Product</code> is displayed.</p> <p>Click on the three dots on the right-hand side and then click <strong>Publish</strong>.</p> <p><a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="../images/apic/54-AM-PUBLISH-PROD-01.png" data-desc-position="bottom"><img alt="Publish Product" src="../images/apic/54-AM-PUBLISH-PROD-01.png" style="height: auto;width: 90%;"></a></p> <p>The <code>Publish Product</code> screen will then display. Make sure that the following values are set:</p> <ul> <li><strong>Publish to (this is the catalog)</strong> : <code>Demo</code></li> <li><strong>Preserve subscription</strong> : <code>de-selected</code></li> </ul> <p><a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="../images/apic/55-AM-PUBLISH-PROD-02.png" data-desc-position="bottom"><img alt="Publish Product" src="../images/apic/55-AM-PUBLISH-PROD-02.png" style="height: auto;width: 90%;"></a></p> <p>Click <strong>Next</strong>. The <code>Visibility</code> screen will display. Make sure that <code>Authenticated</code> is set for both <code>Visibility</code> and <code>Subscribability</code>.</p> <p><a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="../images/apic/56-AM-PUBLISH-PROD-03.png" data-desc-position="bottom"><img alt="Publish Product" src="../images/apic/56-AM-PUBLISH-PROD-03.png" style="height: auto;width: 90%;"></a></p> <p>Click <strong>Publish</strong>. A notification will pop up in the top-right of the screen informing you that the product successfully published.</p> <p>Next, check the <code>Demo</code> catalog to see that the product is now reporting as published.</p> <p>Click <strong>Home &gt; Manage Catalogs &gt; Demo &gt; Products</strong>. The <code>JGRMQAPI Product API Product</code> will show in the list with state <code>Published</code>. It will show that it has two plans (the <code>Default</code> and <code>Premium</code> plans we saw when we imported the product).</p> <p><a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="../images/apic/57-AM-PUBLISH-PROD-04.png" data-desc-position="bottom"><img alt="Publish Product" src="../images/apic/57-AM-PUBLISH-PROD-04.png" style="height: auto;width: 90%;"></a></p> <h3 id="automated-setup-of-api-creation-and-product-publication-via-the-09-apic-publish-apish-script">Automated setup of API creation and product publication via the 09-apic-publish-api.sh Script<a class="headerlink" href="#automated-setup-of-api-creation-and-product-publication-via-the-09-apic-publish-apish-script" title="Permanent link">¶</a></h3> <p>This script will perform the following actions:</p> <ol> <li>Login to the API manager using the <code>admin</code> user</li> <li>Retrieve a series of values from the API Manager to facilitate API publication a. You will need to follow the prompt to open the url in your browser b. Login to API Connect using the <code>ibm-iam-bindinfo-platform-auth-idp-credentials</code> c. Copy the CliedID and paste it back into the terminal, then press <code>enter</code></li> <li>Create a <code>Swagger</code> (API specification) file for the <code>jgrmqapi</code> API using the template <code>templates/template-apic-api-def-jgrmqapiv2.yaml</code> <br> a. See the target URLs are updated in lines 124-128</li> <li>Publish the API in <code>draft</code> state</li> <li>Publishes a corresponding <code>API Product</code> in <code>draft</code> state, with the <code>jgrmqapi</code> API added to the product</li> <li>Creates a new <code>Demo</code> API Catalog</li> <li>Enables the creation of a <code>Developer Portal</code> for the Demo Catalog - this portal is where application developers can login to use APIs. a. <strong>Note:</strong> this is not actually created by the script, just the setting to <em>enable</em> you to create one later is done.</li> <li>Publishes the <code>jgrmqapi</code> API to the Demo Catalog</li> </ol> </article> </div> <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type="button" class="md-top md-icon" data-md-component="top" hidden> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"></path></svg> Back to top </button> </main> <!--
  Copyright (c) 2016-2021 Martin Donath <martin.donath@squidfunk.com>
  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:
  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.
  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
--> <!-- Footer --> <footer class="md-footer"> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class="md-copyright"> <div class="md-copyright__highlight"> Copyright © 2025 IBM Client Engineering </div> Made with <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener"> Material for MkDocs </a> </div> <div class="md-footer-column"> <a href="https://techzone.ibm.com"><img src="https://ibm.biz/PoweredByITZ" style="height:55px;"></a> </div> </div> </div> </footer> </div> <div class="md-dialog" data-md-component="dialog"> <div class="md-dialog__inner md-typeset"></div> </div> <script id="__config" type="application/json">{"base": "../../..", "features": ["content.action.edit", "content.action.view", "content.code.annotate", "content.code.copy", "content.code.select", "content.footnote.tooltips", "content.tabs.link", "content.tooltips", "header.autohide", "navigation.footer", "navigation.indexes", "navigation.instant", "navigation.top", "navigation.tracking", "search.highlight", "search.share", "search.suggest", "toc.follow", "toc.integrate"], "search": "../../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script> <script src="../../../assets/javascripts/bundle.f55a23d4.min.js"></script> <script src="../../../assets/javascripts/custom.054acff4.min.js"></script>  <script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(()=>{ lightbox.reload(); });
</script></body></html>