<!DOCTYPE html><html lang="en" class="no-js"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="Public viewable bootcamp materials for Fast-Start"><meta name="author" content="John Abbott"><link href="https://github.com/skol-candy/fast-start/integration/tech-jam-labs/mq/" rel="canonical"><link rel="icon" href="https://www.ibm.com/favicon.ico"><meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.20"><title>Getting started with MQ Lab - Automation Fast-Starts</title><link rel="stylesheet" href="../../../assets/stylesheets/main.e53b48f4.min.css"><link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=IBM+Plex+Sans:300,300i,400,400i,700,700i%7CIBM+Plex+Mono:400,400i,700,700i&amp;display=fallback"><style>:root{--md-text-font:"IBM Plex Sans";--md-code-font:"IBM Plex Mono"}</style><script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script id="__analytics">function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config",""),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script><script>"undefined"!=typeof __md_analytics&&__md_analytics()</script><link rel="stylesheet" href="../../../assets/stylesheets/custom.00c04c01.min.css"><link href="../../../assets/stylesheets/glightbox.min.css" rel="stylesheet"><script src="../../../assets/javascripts/glightbox.min.js"></script><style id="glightbox-style">
            html.glightbox-open { overflow: initial; height: 100%; }
            .gslide-title { margin-top: 0px; user-select: text; }
            .gslide-desc { color: #666; user-select: text; }
            .gslide-image img { background: white; }
            .gscrollbar-fixer { padding-right: 15px; }
            .gdesc-inner { font-size: 0.75rem; }
            body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color); }
            body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color); }
            body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color); }
        </style></head> <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"> <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off"> <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off"> <label class="md-overlay" for="__drawer"></label> <div data-md-component="skip"> <a href="#getting-started-with-mq-lab" class="md-skip"> Skip to content </a> </div> <div data-md-component="announce"> <aside class="md-banner"> <div class="md-banner__inner md-grid md-typeset"> Welcome to Automation Fast-Starts </div> </aside> </div> <header class="md-header md-header--shadow" data-md-component="header"> <nav class="md-header__inner md-grid" aria-label="Header"> <a href="../../.." title="Automation Fast-Starts" class="md-header__button md-logo" aria-label="Automation Fast-Starts" data-md-component="logo"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M6.906.664a1.75 1.75 0 0 1 2.187 0l5.25 4.2c.415.332.657.835.657 1.367v7.019A1.75 1.75 0 0 1 13.25 15h-3.5a.75.75 0 0 1-.75-.75V9H7v5.25a.75.75 0 0 1-.75.75h-3.5A1.75 1.75 0 0 1 1 13.25V6.23c0-.531.242-1.034.657-1.366l5.25-4.2Zm1.25 1.171a.25.25 0 0 0-.312 0l-5.25 4.2a.25.25 0 0 0-.094.196v7.019c0 .138.112.25.25.25H5.5V8.25a.75.75 0 0 1 .75-.75h3.5a.75.75 0 0 1 .75.75v5.25h2.75a.25.25 0 0 0 .25-.25V6.23a.25.25 0 0 0-.094-.195Z"></path></svg> </a> <label class="md-header__button md-icon" for="__drawer"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"></path></svg> </label> <div class="md-header__title" data-md-component="header-title"> <div class="md-header__ellipsis"> <div class="md-header__topic"> <span class="md-ellipsis"> Automation Fast-Starts </span> </div> <div class="md-header__topic" data-md-component="header-topic"> <span class="md-ellipsis"> Getting started with MQ Lab </span> </div> </div> </div> <form class="md-header__option" data-md-component="palette"> <input class="md-option" data-md-color-media="(prefers-color-scheme)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo" aria-label="Switch to light mode" type="radio" name="__palette" id="__palette_0"> <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1M8 13h8v-2H8zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4a5 5 0 0 0 5-5 5 5 0 0 0-5-5"></path></svg> </label> <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo" aria-label="Switch to dark mode" type="radio" name="__palette" id="__palette_1"> <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"></path></svg> </label> <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="indigo" aria-label="Switch to system preference" type="radio" name="__palette" id="__palette_2"> <label class="md-header__button md-icon" title="Switch to system preference" for="__palette_0" hidden> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5M7 15a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"></path></svg> </label> </form> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for="__search"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg> </label> <div class="md-search" data-md-component="search" role="dialog"> <label class="md-search__overlay" for="__search"></label> <div class="md-search__inner" role="search"> <form class="md-search__form" name="search"> <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required> <label class="md-search__icon md-icon" for="__search"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg> </label> <nav class="md-search__options" aria-label="Search"> <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text data-md-component="search-share" tabindex="-1"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"></path></svg> </a> <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg> </button> </nav> <div class="md-search__suggest" data-md-component="search-suggest"></div> </form> <div class="md-search__output"> <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix> <div class="md-search-result" data-md-component="search-result"> <div class="md-search-result__meta"> Initializing search </div> <ol class="md-search-result__list" role="presentation"></ol> </div> </div> </div> </div> </div> <div class="md-header__source"> <a href="https://github.com/skol-candy/fast-start" title="Go to repository" class="md-source" data-md-component="source"> <div class="md-source__icon md-icon"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"></path></svg> </div> <div class="md-source__repository"> skol-candy/fast-start </div> </a> </div> </nav> </header> <div class="md-container" data-md-component="container"> <main class="md-main" data-md-component="main"> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation"> <div class="md-sidebar__scrollwrap"> <div class="md-sidebar__inner"> <nav class="md-nav md-nav--primary md-nav--integrated" aria-label="Navigation" data-md-level="0"> <label class="md-nav__title" for="__drawer"> <a href="../../.." title="Automation Fast-Starts" class="md-nav__button md-logo" aria-label="Automation Fast-Starts" data-md-component="logo"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M6.906.664a1.75 1.75 0 0 1 2.187 0l5.25 4.2c.415.332.657.835.657 1.367v7.019A1.75 1.75 0 0 1 13.25 15h-3.5a.75.75 0 0 1-.75-.75V9H7v5.25a.75.75 0 0 1-.75.75h-3.5A1.75 1.75 0 0 1 1 13.25V6.23c0-.531.242-1.034.657-1.366l5.25-4.2Zm1.25 1.171a.25.25 0 0 0-.312 0l-5.25 4.2a.25.25 0 0 0-.094.196v7.019c0 .138.112.25.25.25H5.5V8.25a.75.75 0 0 1 .75-.75h3.5a.75.75 0 0 1 .75.75v5.25h2.75a.25.25 0 0 0 .25-.25V6.23a.25.25 0 0 0-.094-.195Z"></path></svg> </a> Automation Fast-Starts </label> <div class="md-nav__source"> <a href="https://github.com/skol-candy/fast-start" title="Go to repository" class="md-source" data-md-component="source"> <div class="md-source__icon md-icon"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"></path></svg> </div> <div class="md-source__repository"> skol-candy/fast-start </div> </a> </div> <ul class="md-nav__list" data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1"> <div class="md-nav__link md-nav__container"> <a href="../../.." class="md-nav__link "> <span class="md-ellipsis"> Welcome </span> </a> </div> <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_1"> <span class="md-nav__icon md-icon"></span> Welcome </label> <ul class="md-nav__list" data-md-scrollfix> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2"> <div class="md-nav__link md-nav__container"> <a href="../../../ama-app-mod/" class="md-nav__link "> <span class="md-ellipsis"> App-Mod with AMA </span> </a> <label class="md-nav__link " for="__nav_2" id="__nav_2_label" tabindex="0"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_2"> <span class="md-nav__icon md-icon"></span> App-Mod with AMA </label> <ul class="md-nav__list" data-md-scrollfix> <li class="md-nav__item"> <a href="../../../ama-app-mod/ama-install/" class="md-nav__link"> <span class="md-ellipsis"> AMA Installation </span> </a> </li> <li class="md-nav__item"> <a href="../../../ama-app-mod/ama-run-scan/" class="md-nav__link"> <span class="md-ellipsis"> Scanning </span> </a> </li> <li class="md-nav__item"> <a href="../../../ama-app-mod/ama-scan-results/" class="md-nav__link"> <span class="md-ellipsis"> Scan Results </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3"> <div class="md-nav__link md-nav__container"> <a href="../../../wca-app-dev-mod/" class="md-nav__link "> <span class="md-ellipsis"> App Dev &amp; Mod WCA </span> </a> <label class="md-nav__link " for="__nav_3" id="__nav_3_label" tabindex="0"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_3"> <span class="md-nav__icon md-icon"></span> App Dev &amp; Mod WCA </label> <ul class="md-nav__list" data-md-scrollfix> <li class="md-nav__item"> <a href="../../../wca-app-dev-mod/lab-1-explain/" class="md-nav__link"> <span class="md-ellipsis"> Lab 1 - Explain </span> </a> </li> <li class="md-nav__item"> <a href="../../../wca-app-dev-mod/lab-2-modernize/" class="md-nav__link"> <span class="md-ellipsis"> Lab 2 - Modernize </span> </a> </li> <li class="md-nav__item"> <a href="../../../wca-app-dev-mod/lab-3-upgrade/" class="md-nav__link"> <span class="md-ellipsis"> Lab 3 - Upgrade Java </span> </a> </li> <li class="md-nav__item"> <a href="../../../wca-app-dev-mod/lab-4-unit-test/" class="md-nav__link"> <span class="md-ellipsis"> Lab 4 - Unit Test </span> </a> </li> <li class="md-nav__item"> <a href="../../../wca-app-dev-mod/lab-5-general-programming/" class="md-nav__link"> <span class="md-ellipsis"> Lab 5 - General Programming </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-content" data-md-component="content"> <article class="md-content__inner md-typeset"> <a href="https://github.com/skol-candy/fast-start/edit/master/docs/integration/tech-jam-labs/mq.md" title="Edit this page" class="md-content__button md-icon" rel="edit"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"></path></svg> </a> <a href="https://github.com/skol-candy/fast-start/raw/master/docs/integration/tech-jam-labs/mq.md" title="View source of this page" class="md-content__button md-icon"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.2 8.2 0 0 1-1.23-2"></path></svg> </a> <h1 id="getting-started-with-mq-lab">Getting started with MQ Lab<a class="headerlink" href="#getting-started-with-mq-lab" title="Permanent link">¶</a></h1> <p>This document explains:</p> <ul> <li>Creating a simple queue manager from the Cloud Pak UI</li> <li>Exploring the MQ Console</li> <li>Test message put and get</li> <li>Creating a ConfigMap for configuration of a queue manager using a yaml file, for the demo</li> <li>Creating a Native HA queue manager using a yaml file, for the demo</li> </ul> <h2 id="scenario-overview">Scenario Overview<a class="headerlink" href="#scenario-overview" title="Permanent link">¶</a></h2> <p>Typically you would not create a queue manager using the UI in a real world customer deployment, it is very handy to be able to show how simple it is to do so in a demo.</p> <p>To begin with you will create a very simple queue manager using the UI. Next you will use the MQ console to edit the queue manager configuration and create a queue for testing. Following that you will use some of the supplied MQ tools to test that you are able to put and get messages from a queue.</p> <h2 id="create-a-simple-queue-manager-using-the-ui">Create a simple queue manager using the UI<a class="headerlink" href="#create-a-simple-queue-manager-using-the-ui" title="Permanent link">¶</a></h2> <p>Log on to the Platform UI (formerly known as the Platform Navigator) and select <strong><em>Integration Instances</em></strong></p> <p>You will see a list of any instances of Cloud Pak capabilities already deployed. Now create a new MQ instance (queue manager). Select <strong><em>Create an Instance</em></strong></p> <p>Select <strong><em>Messaging</em></strong> as the instance you want to create. Click <strong><em>Next</em></strong></p> <p>As you are creating a very basic queue manager, select the <strong><em>Quick Start</em></strong> type of queue manager. Click <strong><em>Next</em></strong></p> <p><a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="../images/mq/01-create-qmgr.png" data-desc-position="bottom"><img alt="create-qmgr" src="../images/mq/01-create-qmgr.png" style="height: auto;width: 70%;"></a></p> <p>Using the dropdown list, select <strong><em>tools</em></strong> as the namespace to contain the queue manager (you can leave the default name) and accept the license agreement. </p> <p>Do <strong>NOT</strong> click Next yet. Scroll down the page </p> <p><a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="../images/mq/02-qmgr-details.png" data-desc-position="bottom"><img alt="qmgr-details" src="../images/mq/02-qmgr-details.png" style="height: auto;width: 90%;"></a></p> <p>You must now decide the level of resiliency for the queue manager. From the dropdown list select <strong><em>Single Instance</em></strong>. This will create what is known as a single resilient queue manager (ie: a single pod which will be restarted automatically in the event of a failure). YOU would normally back this up with persistent storage for the queue manager data and logs, but as this is a test only, leave the default <strong><em>ephemeral</em></strong> storage (ie: non-persistent).</p> <p>Also, turn on the tracing for the Operations Dashboard, from the dropdown box selecting <strong><em>tools</em></strong> as the namespace of the Ops Dashboard. You will not be sending any MQ messages that utilize the Operations Dashboard in this particular lab, this is merely so that you know where it is in the UI.</p> <p><a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="../images/mq/03-tracing.png" data-desc-position="bottom"><img alt="tracing" src="../images/mq/03-tracing.png" style="height: auto;width: 90%;"></a></p> <p>A couple of last things for you to inspect prior to moving on. Click on the <strong><em>Advanced Settings</em></strong> button.</p> <p><a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="../images/mq/04-qmgr-adv-settings.png" data-desc-position="bottom"><img alt="qmgr-adv-settings" src="../images/mq/04-qmgr-adv-settings.png" style="height: auto;width: 20%;"></a></p> <p>In the part of the lab for the demo queue manager we will create a config map used to configure the queue manager and its' objects. In the UI this is where you can point to a config map (which may contain <code>mqsc</code> scripts or <code>qm.ini</code> overrides). You can also specifically name your queue manager here, (for the purposes of this lab QUICKSTART is fine). If you are wanting to add things such as <code>tls</code> keys and certs, this is also where you will go.</p> <p>All of the basic information you require to create a queue manager is now in place (you can also choose to switch to the <code>yaml</code> view if you are interested in looking at what is populated for a basic deployment. Click <strong><em>Create</em></strong></p> <p><a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="../images/mq/05-qmgr-create.png" data-desc-position="bottom"><img alt="qmgr-create" src="../images/mq/05-qmgr-create.png" style="height: auto;width: 70%;"></a></p> <p>You are taken back to the Integration Instances view, where you will see the queue manager as <code>pending</code>.</p> <p><a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="../images/mq/06-int-instances.png" data-desc-position="bottom"><img alt="int-instances" src="../images/mq/06-int-instances.png" style="height: auto;width: 90%;"></a></p> <p>Return to the OpenShift Console to <strong><em>Installed Operators</em></strong></p> <p>Select the <strong><em>tools</em></strong> project and the IBM MQ operator.</p> <p><a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="../images/mq/07-mq-operator.png" data-desc-position="bottom"><img alt="mq-operator" src="../images/mq/07-mq-operator.png" style="height: auto;width: 90%;"></a></p> <p>Select the <strong><em>Queue Manager</em></strong> tab and wait until you see the status as running. </p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This should not take very long and the queue manager may already be running by the time you get there.</p> </div> <p><a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="../images/mq/08-qmgr-tab.png" data-desc-position="bottom"><img alt="qmgr-tab" src="../images/mq/08-qmgr-tab.png" style="height: auto;width: 90%;"></a></p> <p>Now that the queue manager is running go back to the Platform UI. Select the new queue manager in the Messaging tile.</p> <p><a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="../images/mq/09-select-qmgr.png" data-desc-position="bottom"><img alt="select-qmgr" src="../images/mq/09-select-qmgr.png" style="height: auto;width: 50%;"></a></p> <p>This will open up the MQ Console</p> <h2 id="explore-the-mq-console">Explore the MQ Console<a class="headerlink" href="#explore-the-mq-console" title="Permanent link">¶</a></h2> <p><a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="../images/mq/10-manage-qs.png" data-desc-position="bottom"><img alt="manage-qs" src="../images/mq/10-manage-qs.png" style="height: auto;width: 80%;"></a></p> <div class="admonition note"> <p class="admonition-title">Tip</p> <p>If the console does not open correctly, it may be that the web console is not yet ready. Try the following: Go to the OpenShift Console and find the MQ pod</p> <p><a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="../images/mq/11-pods.png" data-desc-position="bottom"><img alt="pods" src="../images/mq/11-pods.png" style="height: auto;width: 80%;"></a></p> <p>Go to the logs (for anyone who is likely to be performing any MQ troubleshooting, this is the log that shows any MQ errors if you ever need to find them).</p> <p><a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="../images/mq/12-logs.png" data-desc-position="bottom"><img alt="logs" src="../images/mq/12-logs.png" style="height: auto;width: 60%;"></a></p> <p>Check for the <code>web server started</code> message. If the web server is started, go back to the Platform UI and try refreshing the screen.</p> <p><a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="../images/mq/13-web-server-started.png" data-desc-position="bottom"><img alt="web-server-started" src="../images/mq/13-web-server-started.png" style="height: auto;width: 90%;"></a></p> </div> <p>You now need to make some changes to the queue manager configuration. As mentioned previously, this is typically done via a config map during queue manager creation, but this gives you the additional opportunity to explore the MQ Console.</p> <p>Given that you simply testing a basic queue manager, turn off all of the security related items that might hold you up. </p> <div class="admonition danger"> <p class="admonition-title">Danger</p> <p>This is NOT a recommended practice - MQ security can be very granular but also wide-ranging, it is recommended that you "start as you mean to continue", which means for a real customer situation ensure that, wherever possible, you set up all the MQ security that is required as part of the queue manager creation</p> </div> <p>Click on <strong><em>View Configuration</em></strong></p> <p><a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="../images/mq/14-view-details.png" data-desc-position="bottom"><img alt="view-details" src="../images/mq/14-view-details.png" style="height: auto;width: 80%;"></a></p> <p>You are shown all properties for the queue manager (for those of you not familiar with MQ - there are many!)</p> <p>Next click on <strong>Edit</strong></p> <p><a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="../images/mq/15-edit.png" data-desc-position="bottom"><img alt="edit" src="../images/mq/15-edit.png" style="height: auto;width: 80%;"></a></p> <p>We will first disable the channel authentication records (in short, channel authentication sets the rules as to who can and cannot make an inbound channel connection to the queue manager).</p> <p>In the Communication section, find the <code>CHLAUTH</code> records and using the dropdown list, select <strong>Disabled</strong>.</p> <p><a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="../images/mq/16-communication.png" data-desc-position="bottom"><img alt="communication" src="../images/mq/16-communication.png" style="height: auto;width: 80%;"></a></p> <p>Next remove the connection authentication (in short, this challenges connecting client applications to provide credentials and then authenticate those credentials with a repository).</p> <p>In the extended section, scroll down to <strong>Connection authentication</strong> and remove the entry (just backspace it all out).</p> <p><a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="../images/mq/17-cluster.png" data-desc-position="bottom"><img alt="cluster" src="../images/mq/17-cluster.png" style="height: auto;width: 70%;"></a></p> <p>Save the changes to the queue manager configuration.</p> <p>Next, in the Actions box, refresh the <strong>authentication service</strong>, then refresh <strong>connection authentication</strong>.</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>For those familiar with MQ, all of this can just as easily be achieved using the terminal window of the MQ pod and <code>runmqsc</code>.</p> </div> <p><a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="../images/mq/18-refresh.png" data-desc-position="bottom"><img alt="refresh" src="../images/mq/18-refresh.png" style="height: auto;width: 40%;"></a></p> <p>Finally, we need to create a queue for our message testing.</p> <p>Go back to the main queue manager page.</p> <div class="admonition note"> <p class="admonition-title">Tip</p> <p>Follow the breadcrumb trail at the top of the console screen if you get lost.</p> </div> <p>You will see a list of queues (probably only one queue starting with <code>AMQ</code>), click <strong><em>Create</em></strong> to create a new queue.</p> <p><a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="../images/mq/19-create-new-q.png" data-desc-position="bottom"><img alt="create-new-q" src="../images/mq/19-create-new-q.png" style="height: auto;width: 90%;"></a></p> <p>Select <strong><em>Local</em></strong> as the queue type.</p> <p><a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="../images/mq/20-local-q.png" data-desc-position="bottom"><img alt="local-q" src="../images/mq/20-local-q.png" style="height: auto;width: 30%;"></a></p> <p>Select a name for the queue (such as <code>TEST</code>).</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>The queue is enabled for both put and get by default. If you wish to change this or any other queue attribute, you can use the Custom Create option.</p> </div> <p>Click <strong><em>Create</em></strong></p> <p><a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="../images/mq/20-create-a-q.png" data-desc-position="bottom"><img alt="local-q" src="../images/mq/20-create-a-q.png" style="height: auto;width: 90%;"></a></p> <p>Your queue manager ready for testing the ability to <code>put</code> and <code>get</code> messages.</p> <h2 id="test-message-put-and-get">Test Message Put and Get<a class="headerlink" href="#test-message-put-and-get" title="Permanent link">¶</a></h2> <p>For this part of the lab you will use some of the sample programs that are delivered with MQ. You will <code>put</code> a message on a queue both in <code>binding mode</code> (ie: via a direct connection to the queue manager) and <code>client mode</code> (ie: via an mq client connection).</p> <p>Go to the OpenShift Console and back to the MQ pod.</p> <p>Open the terminal. The first test you will run is using a program called <code>amqsput</code>. This is a sample program that allows you to connect to a queue manager and put messages onto a named queue. You do not need to enter a queue manager name as a parameter since the program will connect to the default queue manager.</p> <p>Perform the following:</p> <div class="language-sh highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>Navigate<span class="w"> </span>to<span class="w"> </span>/opt/mqm/samp/bin
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>./amqsput<span class="w"> </span>TEST
</span></code></pre></div> <p>Enter a message for the queue (put as many as you like by simply hitting enter after each message).</p> <p>Hit enter twice to finish.</p> <p><a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="../images/mq/22-connecting-to-q.png" data-desc-position="bottom"><img alt="connecting-to-q" src="../images/mq/22-connecting-to-q.png" style="height: auto;width: 50%;"></a></p> <p>The next test we will run will put a message on a queue using an mq client connection. In this case we need to set an environment variable to identify the queue manager (as you would find in a CCDT).</p> <div class="admonition note"> <p class="admonition-title">Connecting to a Queue Manager</p> <p>How to connect to a queue manager from inside or outside of the cluster? The hostname used for the MQ traffic within the cluster takes the form of: <service>.<namespace>.svc</namespace></service></p> </div> <p>From outside the cluster, the hostname can be found in the <code>route</code> Internally you can use port 1414 for the listener Externally you would use port 443</p> <p>For your test, the hostname is as follows: quickstart-cp4i-ibm-mq.tools.svc(1414)</p> <p>Perform the following from your CLI:</p> <p>Navigate to <code>/opt/mqm/samp/bin</code> (if not already there) Set the <code>MQSERVER</code> variable - this takes the form of <code>&lt;CHANNEL NAME&gt;/TCP/&lt;hostname&gt;&lt;port&gt;</code></p> <div class="language-sh highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="nb">export</span><span class="w"> </span><span class="nv">MQSERVER</span><span class="o">=</span><span class="s1">'SYSTEM.DEF.SVRCONN/TCP/quickstart-cp4i-ibm-mq.tools.svc(1414)'</span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>./amqsputc<span class="w"> </span>TEST<span class="w"> </span>QUICKSTART
</span></code></pre></div> <p>Enter a message for the queue (put as many as you like by simply hitting enter after each message). Hit enter twice to finish.</p> <p><a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="../images/mq/23-enter-msg.png" data-desc-position="bottom"><img alt="enter-msg" src="../images/mq/23-enter-msg.png" style="height: auto;width: 70%;"></a></p> <p>Next, return to the MQ Console and check that the messages are there as expected.</p> <p>If you previously <code>put</code> 2 messages on using the tools there will be 2 messages on the <code>TEST</code> queue (if not, try refreshing the display).</p> <p><a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="../images/mq/24-view-q.png" data-desc-position="bottom"><img alt="view-q" src="../images/mq/24-view-q.png" style="height: auto;width: 80%;"></a></p> <p>Click on the <code>TEST</code> queue to see the messages, then click on one of the messages to see the message content.</p> <p><a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="../images/mq/25-view-msg.png" data-desc-position="bottom"><img alt="view-msg" src="../images/mq/25-view-msg.png" style="height: auto;width: 50%;"></a></p> <h2 id="create-configmap-for-demo-queue-manager">Create ConfigMap for Demo Queue Manager<a class="headerlink" href="#create-configmap-for-demo-queue-manager" title="Permanent link">¶</a></h2> <p>In this section you will create the queue manager and its artifacts for the demo. You will use the provided scripts for expediency. You are encourage you to take a look at each of the scripts before you deploying. This will give you a greater understanding of what is being created. </p> <p>!!! Danger "Special Note: It is assumed that you are familiar with the concept of a <code>ConfigMap</code> for storing non-sensitive configuration data. If the contents are sensitive, you should use a secret instead. In the case of MQ, the <code>ConfigMap</code> is used to provide <code>mqsc</code> commands and/or <code>qm.ini</code> overrides.</p> <div class="language-yaml highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ConfigMap</span>
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="nt">metadata</span><span class="p">:</span>
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mq-demo-mqsc</span>
</span><span id="__span-2-5"><a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a><span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tools</span>
</span><span id="__span-2-6"><a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a><span class="nt">data</span><span class="p">:</span>
</span><span id="__span-2-7"><a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a><span class="w">  </span><span class="nt">mq-demo-resources.mqsc</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
</span><span id="__span-2-8"><a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a><span class="w">    </span><span class="no">ALTER QMGR CHLAUTH (DISABLED)</span>
</span><span id="__span-2-9"><a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a><span class="w">    </span><span class="no">ALTER AUTHINFO(SYSTEM.DEFAULT.AUTHINFO.IDPWOS)  AUTHTYPE(IDPWOS) CHCKCLNT(NONE)</span>
</span><span id="__span-2-10"><a id="__codelineno-2-10" name="__codelineno-2-10" href="#__codelineno-2-10"></a><span class="w">    </span><span class="no">REFRESH SECURITY TYPE(CONNAUTH)</span>
</span><span id="__span-2-11"><a id="__codelineno-2-11" name="__codelineno-2-11" href="#__codelineno-2-11"></a><span class="w">    </span><span class="no">DEFINE CHANNEL(ACE.TO.MQ) CHLTYPE(SVRCONN) TRPTYPE(TCP) MCAUSER('mqm') REPLACE</span>
</span><span id="__span-2-12"><a id="__codelineno-2-12" name="__codelineno-2-12" href="#__codelineno-2-12"></a><span class="w">    </span><span class="no">DEFINE CHANNEL(ES.TO.MQ) CHLTYPE(SVRCONN) TRPTYPE(TCP) MCAUSER('mqm') REPLACE</span>
</span><span id="__span-2-13"><a id="__codelineno-2-13" name="__codelineno-2-13" href="#__codelineno-2-13"></a><span class="w">    </span><span class="no">DEFINE CHANNEL(MQ.TO.ES) CHLTYPE(SVRCONN) TRPTYPE(TCP) MCAUSER('mqm') REPLACE</span>
</span><span id="__span-2-14"><a id="__codelineno-2-14" name="__codelineno-2-14" href="#__codelineno-2-14"></a><span class="w">    </span><span class="no">DEFINE CHANNEL(CP4I.ADMIN.SVRCONN) CHLTYPE(SVRCONN) TRPTYPE(TCP) MCAUSER('mqm') SSLCAUTH(OPTIONAL) SSLCIPH(ECDHE_RSA_AES_128_CBC_SHA256) REPLACE</span>
</span><span id="__span-2-15"><a id="__codelineno-2-15" name="__codelineno-2-15" href="#__codelineno-2-15"></a><span class="w">    </span><span class="no">DEFINE QLOCAL(CP4I.DEMO.ERROR.Q) DEFPSIST(YES) REPLACE</span>
</span><span id="__span-2-16"><a id="__codelineno-2-16" name="__codelineno-2-16" href="#__codelineno-2-16"></a><span class="w">    </span><span class="no">DEFINE QLOCAL(CP4I.DEMO.STREAM.Q) DEFPSIST(YES) REPLACE</span>
</span><span id="__span-2-17"><a id="__codelineno-2-17" name="__codelineno-2-17" href="#__codelineno-2-17"></a><span class="w">    </span><span class="no">DEFINE QLOCAL(CP4I.DEMO.IN.Q) DEFPSIST(YES) BOQNAME(CP4I.DEMO.ERROR.Q) BOTHRESH(1) REPLACE</span>
</span><span id="__span-2-18"><a id="__codelineno-2-18" name="__codelineno-2-18" href="#__codelineno-2-18"></a><span class="w">    </span><span class="no">DEFINE QLOCAL(CP4I.DEMO.OUT.Q) DEFPSIST(YES) BOQNAME(CP4I.DEMO.ERROR.Q) BOTHRESH(1) REPLACE</span>
</span><span id="__span-2-19"><a id="__codelineno-2-19" name="__codelineno-2-19" href="#__codelineno-2-19"></a><span class="w">    </span><span class="no">DEFINE QLOCAL(CP4I.DEMO.ES.TO.MQ) DEFPSIST(YES) BOQNAME(CP4I.DEMO.ERROR.Q) BOTHRESH(1) REPLACE</span>
</span><span id="__span-2-20"><a id="__codelineno-2-20" name="__codelineno-2-20" href="#__codelineno-2-20"></a><span class="w">    </span><span class="no">DEFINE QLOCAL(CP4I.DEMO.MQ.TO.ES) DEFPSIST(YES) BOQNAME(CP4I.DEMO.ERROR.Q) BOTHRESH(1) REPLACE</span>
</span><span id="__span-2-21"><a id="__codelineno-2-21" name="__codelineno-2-21" href="#__codelineno-2-21"></a><span class="w">    </span><span class="no">DEFINE QLOCAL(CP4I.DEMO.FILE.TO.MQ) DEFPSIST(YES) BOQNAME(CP4I.DEMO.ERROR.Q) BOTHRESH(1) REPLACE</span>
</span><span id="__span-2-22"><a id="__codelineno-2-22" name="__codelineno-2-22" href="#__codelineno-2-22"></a><span class="w">    </span><span class="no">DEFINE QLOCAL(CP4I.DEMO.MQ.TO.FILE) DEFPSIST(YES) BOQNAME(CP4I.DEMO.ERROR.Q) BOTHRESH(1) REPLACE</span>
</span><span id="__span-2-23"><a id="__codelineno-2-23" name="__codelineno-2-23" href="#__codelineno-2-23"></a><span class="w">    </span><span class="no">DEFINE QLOCAL(CP4I.DEMO.API.Q) BOQNAME(CP4I.DEMO.ERROR.Q) BOTHRESH(1) STREAMQ(CP4I.DEMO.STREAM.Q) REPLACE</span>
</span><span id="__span-2-24"><a id="__codelineno-2-24" name="__codelineno-2-24" href="#__codelineno-2-24"></a><span class="w">    </span><span class="no">DEFINE QLOCAL(CP4I.DEMO.REQUEST.Q) BOQNAME(CP4I.DEMO.ERROR.Q) BOTHRESH(1) REPLACE</span>
</span><span id="__span-2-25"><a id="__codelineno-2-25" name="__codelineno-2-25" href="#__codelineno-2-25"></a><span class="w">    </span><span class="no">DEFINE QLOCAL(CP4I.DEMO.EVENT.Q) BOQNAME(CP4I.DEMO.ERROR.Q) BOTHRESH(1) REPLACE</span>
</span><span id="__span-2-26"><a id="__codelineno-2-26" name="__codelineno-2-26" href="#__codelineno-2-26"></a><span class="w">    </span><span class="no">DEFINE QLOCAL(CP4I.DEMO.TEMP.Q) BOQNAME(CP4I.DEMO.ERROR.Q) BOTHRESH(1) REPLACE</span>
</span><span id="__span-2-27"><a id="__codelineno-2-27" name="__codelineno-2-27" href="#__codelineno-2-27"></a><span class="w">    </span><span class="no">DEFINE QLOCAL(CP4I.DEMO.BACKEND.Q) BOQNAME(CP4I.DEMO.ERROR.Q) BOTHRESH(1) REPLACE</span>
</span></code></pre></div> <p>Reviewing the <code>ConfigMap</code>, you will notice security has been disabled for simplicity, but more importantly mq streaming has been enabled in order to highlight this new feature during the demonstration. If you have any questions regarding what any of the <code>mqsc</code> command are doing, please feel free to ask one of the instructors.</p> <p>There are multiple ways to create the components of the demo, each of which you will experiment with during the labs. Below you will use the OpenShift Console to create the <code>ConfigMap</code>.</p> <p>To apply the <code>yaml</code>, you must be logged into the OpenShift UI.</p> <p>Click on the little <strong>plus sign</strong> in the top right corner of the screen to import the <code>yaml</code></p> <p><a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="../images/mq/26-import-yaml.png" data-desc-position="bottom"><img alt="import-yaml" src="../images/mq/26-import-yaml.png" style="height: auto;width: 50%;"></a></p> <p>Copy and paste the <code>yaml</code> from above in to the <strong>Import YAML</strong> window and press <strong><em>Create</em></strong></p> <p><a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="../images/mq/27-create.png" data-desc-position="bottom"><img alt="create" src="../images/mq/27-create.png" style="height: auto;width: 90%;"></a></p> <p>Go to <code>ConfigMaps</code> (they are found under the Workloads folder in the left hand menu) and check that the <code>mq-demo-mqsc</code> <code>ConfigMap</code> exists:</p> <p><a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="../images/mq/28-config-map.png" data-desc-position="bottom"><img alt="config-map" src="../images/mq/28-config-map.png" style="height: auto;width: 60%;"></a></p> <p>Open the ConfigMap and check that it is appears as expected.</p> <p><a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="../images/mq/29-mqsc.png" data-desc-position="bottom"><img alt="mqsc" src="../images/mq/29-mqsc.png" style="height: auto;width: 90%;"></a></p> <p>You now have the config ready to be plugged into your demo queue manager.</p> <h2 id="create-native-ha-queue-manager-for-the-demo">Create Native-HA Queue Manager for the Demo<a class="headerlink" href="#create-native-ha-queue-manager-for-the-demo" title="Permanent link">¶</a></h2> <p>For the demo, you will be deploying a Native-HA queue manager. If you are unfamiliar with a NativeHA queue manager, it is the "Rolls Royce" of MQ high availability solutions, which is built into CP4I.</p> <p>A Native-HA configuration provides a highly available queue manager where the recoverable MQ data (for example, the messages) are replicated across multiple sets of storage, preventing loss from storage failures. The queue manager consists of multiple running instances, one is the leader, the others are ready to quickly take over in the event of a failure, maximizing access to the queue manager and its messages.</p> <p>This is a relatively simple description of how it works, you can read about it in much more detail in the Knowledge Center.</p> <p>The <code>yaml</code> requred to create the queue manager:</p> <div class="language-yaml highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mq.ibm.com/v1beta1</span>
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">QueueManager</span>
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a><span class="nt">metadata</span><span class="p">:</span>
</span><span id="__span-3-4"><a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">qmgr-demo</span>
</span><span id="__span-3-5"><a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a><span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tools</span>
</span><span id="__span-3-6"><a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a><span class="nt">spec</span><span class="p">:</span>
</span><span id="__span-3-7"><a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a><span class="w">  </span><span class="nt">annotations</span><span class="p">:</span>
</span><span id="__span-3-8"><a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a><span class="w">    </span><span class="nt">productMetric</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">FREE</span>
</span><span id="__span-3-9"><a id="__codelineno-3-9" name="__codelineno-3-9" href="#__codelineno-3-9"></a><span class="w">  </span><span class="nt">license</span><span class="p">:</span>
</span><span id="__span-3-10"><a id="__codelineno-3-10" name="__codelineno-3-10" href="#__codelineno-3-10"></a><span class="w">    </span><span class="nt">accept</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span><span id="__span-3-11"><a id="__codelineno-3-11" name="__codelineno-3-11" href="#__codelineno-3-11"></a><span class="w">    </span><span class="nt">license</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">L-RJON-CD3JKX</span>
</span><span id="__span-3-12"><a id="__codelineno-3-12" name="__codelineno-3-12" href="#__codelineno-3-12"></a><span class="w">    </span><span class="nt">use</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">NonProduction</span>
</span><span id="__span-3-13"><a id="__codelineno-3-13" name="__codelineno-3-13" href="#__codelineno-3-13"></a><span class="w">  </span><span class="nt">queueManager</span><span class="p">:</span>
</span><span id="__span-3-14"><a id="__codelineno-3-14" name="__codelineno-3-14" href="#__codelineno-3-14"></a><span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">QMGRDEMO</span>
</span><span id="__span-3-15"><a id="__codelineno-3-15" name="__codelineno-3-15" href="#__codelineno-3-15"></a><span class="w">    </span><span class="nt">resources</span><span class="p">:</span>
</span><span id="__span-3-16"><a id="__codelineno-3-16" name="__codelineno-3-16" href="#__codelineno-3-16"></a><span class="w">      </span><span class="nt">limits</span><span class="p">:</span>
</span><span id="__span-3-17"><a id="__codelineno-3-17" name="__codelineno-3-17" href="#__codelineno-3-17"></a><span class="w">        </span><span class="nt">cpu</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">500m</span>
</span><span id="__span-3-18"><a id="__codelineno-3-18" name="__codelineno-3-18" href="#__codelineno-3-18"></a><span class="w">      </span><span class="nt">requests</span><span class="p">:</span>
</span><span id="__span-3-19"><a id="__codelineno-3-19" name="__codelineno-3-19" href="#__codelineno-3-19"></a><span class="w">        </span><span class="nt">cpu</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">500m</span>
</span><span id="__span-3-20"><a id="__codelineno-3-20" name="__codelineno-3-20" href="#__codelineno-3-20"></a><span class="w">    </span><span class="nt">storage</span><span class="p">:</span>
</span><span id="__span-3-21"><a id="__codelineno-3-21" name="__codelineno-3-21" href="#__codelineno-3-21"></a><span class="w">      </span><span class="nt">queueManager</span><span class="p">:</span>
</span><span id="__span-3-22"><a id="__codelineno-3-22" name="__codelineno-3-22" href="#__codelineno-3-22"></a><span class="w">        </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">persistent-claim</span>
</span><span id="__span-3-23"><a id="__codelineno-3-23" name="__codelineno-3-23" href="#__codelineno-3-23"></a><span class="w">      </span><span class="nt">defaultClass</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ibmc-block-gold</span>
</span><span id="__span-3-24"><a id="__codelineno-3-24" name="__codelineno-3-24" href="#__codelineno-3-24"></a><span class="w">    </span><span class="nt">availability</span><span class="p">:</span>
</span><span id="__span-3-25"><a id="__codelineno-3-25" name="__codelineno-3-25" href="#__codelineno-3-25"></a><span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">NativeHA</span>
</span><span id="__span-3-26"><a id="__codelineno-3-26" name="__codelineno-3-26" href="#__codelineno-3-26"></a><span class="w">    </span><span class="nt">mqsc</span><span class="p">:</span>
</span><span id="__span-3-27"><a id="__codelineno-3-27" name="__codelineno-3-27" href="#__codelineno-3-27"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">configMap</span><span class="p">:</span>
</span><span id="__span-3-28"><a id="__codelineno-3-28" name="__codelineno-3-28" href="#__codelineno-3-28"></a><span class="w">          </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mq-demo-mqsc</span>
</span><span id="__span-3-29"><a id="__codelineno-3-29" name="__codelineno-3-29" href="#__codelineno-3-29"></a><span class="w">          </span><span class="nt">items</span><span class="p">:</span>
</span><span id="__span-3-30"><a id="__codelineno-3-30" name="__codelineno-3-30" href="#__codelineno-3-30"></a><span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mq-demo-resources.mqsc</span>
</span><span id="__span-3-31"><a id="__codelineno-3-31" name="__codelineno-3-31" href="#__codelineno-3-31"></a><span class="w">  </span><span class="nt">template</span><span class="p">:</span>
</span><span id="__span-3-32"><a id="__codelineno-3-32" name="__codelineno-3-32" href="#__codelineno-3-32"></a><span class="w">    </span><span class="nt">pod</span><span class="p">:</span>
</span><span id="__span-3-33"><a id="__codelineno-3-33" name="__codelineno-3-33" href="#__codelineno-3-33"></a><span class="w">      </span><span class="nt">containers</span><span class="p">:</span>
</span><span id="__span-3-34"><a id="__codelineno-3-34" name="__codelineno-3-34" href="#__codelineno-3-34"></a><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">env</span><span class="p">:</span>
</span><span id="__span-3-35"><a id="__codelineno-3-35" name="__codelineno-3-35" href="#__codelineno-3-35"></a><span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">MQSNOAUT</span>
</span><span id="__span-3-36"><a id="__codelineno-3-36" name="__codelineno-3-36" href="#__codelineno-3-36"></a><span class="w">              </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="s">'yes'</span>
</span><span id="__span-3-37"><a id="__codelineno-3-37" name="__codelineno-3-37" href="#__codelineno-3-37"></a><span class="w">          </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">qmgr</span>
</span><span id="__span-3-38"><a id="__codelineno-3-38" name="__codelineno-3-38" href="#__codelineno-3-38"></a><span class="w">  </span><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">9.3.0.0-r1</span>
</span><span id="__span-3-39"><a id="__codelineno-3-39" name="__codelineno-3-39" href="#__codelineno-3-39"></a><span class="w">  </span><span class="nt">web</span><span class="p">:</span>
</span><span id="__span-3-40"><a id="__codelineno-3-40" name="__codelineno-3-40" href="#__codelineno-3-40"></a><span class="w">    </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span><span id="__span-3-41"><a id="__codelineno-3-41" name="__codelineno-3-41" href="#__codelineno-3-41"></a><span class="w">  </span><span class="nt">tracing</span><span class="p">:</span>
</span><span id="__span-3-42"><a id="__codelineno-3-42" name="__codelineno-3-42" href="#__codelineno-3-42"></a><span class="w">    </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span><span id="__span-3-43"><a id="__codelineno-3-43" name="__codelineno-3-43" href="#__codelineno-3-43"></a><span class="w">    </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tools</span>
</span></code></pre></div> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This <code>yaml</code> file shows how to use annotations to let License Service know this is a Queue Manager used by ACE. Therefor this queue won't consume VPCs. Additionally, the instance uses Native-HA to show this functionality during the demonstration. Further, the deployment enables tracing, but since we are using the same <code>tools</code> namespace there is no need to register again with Operations Dashboard. You are only required to register once per namespace.</p> </div> <p>Using the same method that we used to create the <code>ConfigMap</code>, apply the <code>yaml</code> to create the queue manager. Take a look at the pods for the queue manager. You will note that there are three of them.</p> <p><a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="../images/mq/30-pods.png" data-desc-position="bottom"><img alt="pods" src="../images/mq/30-pods.png" style="height: auto;width: 80%;"></a></p> <p>Wait until all of the queue manager pods are active (this may take a short time, while the storage is being provisioned). </p> <p><a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="../images/mq/31-pods-complete.png" data-desc-position="bottom"><img alt="pods-complete" src="../images/mq/31-pods-complete.png" style="height: auto;width: 60%;"></a></p> <div class="admonition note"> <p class="admonition-title">You may be wondering...</p> <p>If there is only ever one queue manager pod active at the one time, why two of the pods are showing as having ⅔ container active? This is due to the Operations Dashboard tracing sidecar containers - don't panic! The active queue manager pod is the one with 3/3 active containers.</p> </div> <p>Feeling adventurous? Test the workings of Native-HA: </p> <ul> <li><code>Put</code> a message on a queue (using your favorite method)</li> <li><code>oc delete</code> the active MQ pod</li> <li>Watch the takeover by one of the other pods</li> <li>Log back into the MQ console (or any of your other favurite tools) and check that the message is still on the queue (where you put it prior to deleting the pod)</li> <li>Recheck the status of all three pods</li> </ul> <p><strong><em>You have completed the MQ Lab</em></strong></p> </article> </div> <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type="button" class="md-top md-icon" data-md-component="top" hidden> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"></path></svg> Back to top </button> </main> <!--
  Copyright (c) 2016-2021 Martin Donath <martin.donath@squidfunk.com>
  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:
  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.
  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
--> <!-- Footer --> <footer class="md-footer"> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class="md-copyright"> <div class="md-copyright__highlight"> Copyright © 2025 IBM Client Engineering </div> Made with <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener"> Material for MkDocs </a> </div> <div class="md-footer-column"> <a href="https://techzone.ibm.com"><img src="https://ibm.biz/PoweredByITZ" style="height:55px;"></a> </div> </div> </div> </footer> </div> <div class="md-dialog" data-md-component="dialog"> <div class="md-dialog__inner md-typeset"></div> </div> <script id="__config" type="application/json">{"base": "../../..", "features": ["content.action.edit", "content.action.view", "content.code.annotate", "content.code.copy", "content.code.select", "content.footnote.tooltips", "content.tabs.link", "content.tooltips", "header.autohide", "navigation.footer", "navigation.indexes", "navigation.instant", "navigation.top", "navigation.tracking", "search.highlight", "search.share", "search.suggest", "toc.follow", "toc.integrate"], "search": "../../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script> <script src="../../../assets/javascripts/bundle.f55a23d4.min.js"></script> <script src="../../../assets/javascripts/custom.054acff4.min.js"></script>  <script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(()=>{ lightbox.reload(); });
</script></body></html>